<title>Farmers Market Organic Weekly Greens Bundle | AmazonFresh</title>
		<link rel="stylesheet" type="text/css" href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/dashSamples.css" />
		<meta name="verify-v1" content="lutKQKzTRD4Thc7dLxJZfCfpu/8crumpkdr/y2u32Kk=" />
		<meta name="description" content="Next-day and early morning delivery of fresh grocery, everyday essentials, neighborhood products, and Amazon.com items." />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="google-site-verification" content="9vpzZueNucS8hPqoGpZ5r10Nr2_sLMRG3AnDtNlucc4" />
		<link rel="stylesheet" type="text/css" href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/jqueryAutocomplete-1.2._V260835473_.css" />
		<link href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/default._V1455922598_.css" type="text/css" rel="stylesheet" />
		<link href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/searchAndBrowse._V1444414380_.css" type="text/css" rel="stylesheet" />
		<link href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/merchandising._V243298351_.css" type="text/css" rel="stylesheet" />
		<link href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/pastPurchases._V1411590411_.css" type="text/css" rel="stylesheet" />
		<link href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/info._V1369786404_.css" type="text/css" rel="stylesheet" />
		<link href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/help._V1387227412_.css" type="text/css" rel="stylesheet" />
		<link href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/nf._V1375904896_.css" type="text/css" rel="stylesheet" />
		<script type="text/javascript" src="https://images-na.ssl-images-amazon.com/images/G/01/javascripts/lib/jquery/jquery-1.3.2.min._V244049497_.js"></script>
		<script type="text/javascript" src="https://images-na.ssl-images-amazon.com/images/G/01/javascripts/lib/jquery/jquery-ui-1.8.11.full.min.js"></script>
		<script>
			(function($){
			$.widget("custom.autoCompleteBold", $.ui.autocomplete, {
			_renderItem: function(ul, item) {
			var term = $.trim(this.term);
			//match input term to each result and apply strong tag
			var boldedHTMLResults = item.label.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + term.replace(/([\^$\(\)\[\]\{\}\*\.\+\?\|\\])/gi, "\$1") + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>");
			return $( "<li></li>" )
			.data( "item.autocomplete", item )
			.addClass(this.options.liClass || "")
			.append( $( "<a></a>" ).html( boldedHTMLResults ) )
			.appendTo( ul );
			}
			});
			}(jQuery));
		</script>
		<script type="text/javascript" src="https://images-na.ssl-images-amazon.com/images/G/01/omaha/javascript/jqueryAutocomplete-1-1-custom._V400505187_.js"></script>
		<script type="text/javascript">jQuery.noConflict();</script>
		<!--[if lt IE 9]>
		<script type="text/javascript" src="https://images-na.ssl-images-amazon.com/images/G/01/omaha/js/html5shiv._V1378307129_.js"></script>
		<![endif]-->
		<script type="text/javascript">
			function setCookie(c_name,value,expiredays)
			{
			var exdate=new Date();
			exdate.setDate(exdate.getDate()+expiredays);
			document.cookie=c_name+ "=" +escape(value)+
			((expiredays==null) ? "" : ";expires="+exdate.toGMTString());
			}
			function getCookie(c_name)
			{
			if (document.cookie.length>0)
			{
			c_start=document.cookie.indexOf(c_name + "=");
			if (c_start!=-1)
			{
			c_start=c_start + c_name.length+1;
			c_end=document.cookie.indexOf(";",c_start);
			if (c_end==-1) c_end=document.cookie.length;
			return unescape(document.cookie.substring(c_start,c_end));
			}
			}
			return "";
			}
			function deleteCookie ( cookie_name )
			{
			var cookie_date = new Date ( );  // current date & time
			cookie_date.setTime ( cookie_date.getTime() - 1 );
			document.cookie = cookie_name += "=; expires=" + cookie_date.toGMTString();
			}
		</script>
		<link href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/shoveler._V1397624657_.css" type="text/css" rel="stylesheet" />
		<script type="text/javascript">
			function FreshShoveler(shovelerId) {
				this.id = shovelerId;
				this.shoveler = jQuery("#"+shovelerId);
			this.type = FreshShovelerMeta.ShovelerTypes[getParam(this.shoveler, "type")];
			if(null != this.type) {
				this.header = getParam(this.shoveler, "header");
				this.footer = getParam(this.shoveler, "footer");
				this.footerTarget = getParam(this.shoveler, "footerTarget");
				this.isMinDisplay = getParam(this.shoveler, "isMinDisplay");
				this.displayType = getParam(this.shoveler, "displayType");
				if (isEmpty(this.displayType)) { this.displayType = 'standard';}
				this.items = null;
				this.capacity = 0;
				this.perItemMargin = 0;
				this.currentItem = 0;
				this.currentPage = 0;
				this.pageCount = 0;
				this.paginatorGutter = 50; // hero will overwrite this.
				this.firstLoad = true;
				// hero uses a custom load function.
				if('function' != typeof this.type.load) {
					this.load = FreshShovelerMeta.loadFreshShoveler;
				} else {
					this.load = this.type.load;
				}
				this.getExtraParams = this.type.getParams;
				this.getItems = this.type.getItems;
				this.populateItems = FreshShovelerMeta.populateItems;
			} else {
			this.load = function() {
			// do something to log bad widget type? otherwise just keep empty (js makes a fuss trying to call a null function)
			};
			}
			this.bindPaginationEvents = function() {
				var s = this;
			this.shoveler.find("div.backButton").click(function() { FreshShovelerMeta.showPrev(s); return false; });
			this.shoveler.find("div.nextButton").click(function() { FreshShovelerMeta.showNext(s); return false; });
			};
			}
			// getting in the habit of keeping namespace clean by introducing as few global vars as possible.
			var FreshShovelerMeta = {
				shovelerTemplate: jQuery("<h2/><div class='body'><div class='shovelerPagination'>Page <span class='currentPage'>0</span> of <span class='pageCount'>0</span></div><div class='backButton'/><div class='shovelerItems'/><div class='nextButton'/></div><div class='footer'></div>"),
				loadingImage: jQuery("<img src='https://images-na.ssl-images-amazon.com/images/G/01/ui/loadIndicators/loading-large.gif' class='loading' alt='Loading...'/>"),
				ShovelerTypes: {
			// SEARCH SHOVELER takes a search query string via <input type='hidden' name='query' value='[query]' />
				search: {
					itemWidth: 137,
					getParams: function() { this.query = getParam(this.shoveler, "query"); },
					getItems: function() {
						var s = this; // hooray js scoping!
						var asin = getParam(this.shoveler, "asin");
						var action = "shovelerSearch?";
						if(asin != null) {
						action = "shoveler?action=search&";
						}
						jQuery.get(action + this.query + "&source=" + s.id, function(ajax) {
							if(jQuery.trim(ajax) == "") { // hide widget if there are no items
							s.shoveler.hide();
							} else {
							s.populateItems(ajax);
							FreshShovelerMeta.arrangeItems(s);
							
							jQuery(window).resize(function() { FreshShovelerMeta.arrangeItems(s); });
							s.bindPaginationEvents();
							FreshShovelerMeta.tagItems(s);
							FreshShovelerMeta.checkAsins(s);
							}
						});
					}
				},
				// LIST SHOVELER takes a list id via <input type='hidden' name='listId' value='[id]' />
				list: {
				itemWidth: 137,
				getParams: function() { this.listId = getParam(this.shoveler, "listId"); },
				getItems: function() {
					var s = this; // hooray js scoping!
			jQuery.get("shoveler?action=list&listId="+this.listId+"&source="+s.id, function(ajax) {
				if(jQuery.trim(ajax) == "") { // hide widget if there are no items
			s.shoveler.hide();
			} else {
				s.populateItems(ajax);
				FreshShovelerMeta.arrangeItems(s);
				
				jQuery(window).resize(function() { FreshShovelerMeta.arrangeItems(s); });
				s.bindPaginationEvents();
							FreshShovelerMeta.tagItems(s);
				FreshShovelerMeta.checkAsins(s);
			}
			});
				}
				},
				// HERO WIDGET
				hero: {
					itemWidth: 110,
					heroTemplate: jQuery("<h1/><div class='heroSpotContainer' /><div class='heroShoveler'><table class='heroShoveler'><tr><td class='backButton'></td><td class='shovelerItems'></td><td class='nextButton'></td></tr></table></div>"),
					load: function() {
						this.listId = getParam(this.shoveler, "listId");
					this.headline = getParam(this.shoveler, "headline");
					this.paginatorGutter = 15;
						
						this.shoveler.append(FreshShovelerMeta.ShovelerTypes.hero.heroTemplate.clone());
						this.shoveler.find(".shovelerItems").append(FreshShovelerMeta.loadingImage.clone());
						this.shoveler.find("h1").text(this.headline);
						this.getItems();
					},
					getItems: function() {
						var s = this;
						jQuery.get("shoveler?action=hero&listId="+this.listId+"&source="+s.id, function(ajax) {
							if(jQuery.trim(ajax) == "") { // hide widget if there are no items
								s.shoveler.hide();
							} else {
								var response = jQuery(ajax);
								var heroSpots = response.filter("table.heroSpot");
								heroSpots.hide();
								s.shoveler.find(".heroSpotContainer").append(heroSpots);
								s.populateItems(response.filter("div.shovelerItem"));
								s.items.find(".productImage").click(function(event) {
									var asin = jQuery(event.target).parents("div.shovelerItem").find("input[name='expectedAsin']").val();
									var targetHeroSpot = jQuery("#heroSpot_"+asin);
									targetHeroSpot.siblings().fadeOut(300);
									targetHeroSpot.fadeIn(300);
								});
								jQuery(s.items[0]).find(".productImage").click();
								
								FreshShovelerMeta.arrangeItems(s);
								jQuery(window).resize(function() { FreshShovelerMeta.arrangeItems(s); });
								s.bindPaginationEvents();
			FreshShovelerMeta.tagItems(s);
			FreshShovelerMeta.checkAsins(s);
							}
						});
					}
				},
				// DID YOU FORGET SHOVELER generates items from customer's past purchases, with some bestsellers & magazines mixed in
				didYouForget: {
					itemWidth: 137,
					getItems: function() {
				var s = this;
				jQuery.get("DidYouForgetWidget?source=shovelerjs", function(ajax) {
					if(jQuery.trim(ajax) == "") { // hide widget if there are no items
			s.shoveler.hide();
			} else {
			s.populateItems(ajax);
			FreshShovelerMeta.arrangeItems(s);
			
			jQuery(window).resize(function() { FreshShovelerMeta.arrangeItems(s); });
			s.bindPaginationEvents();
							FreshShovelerMeta.tagItems(s);
			FreshShovelerMeta.checkAsins(s);
			}
				});
				}
				},
				// FREE GIFT SHOVELER takes items out of the page (loaded synchronously)
				freeGift: {
				itemWidth: 137,
				getItems: function() {
					var s = this;
					var items = this.shoveler.find(".itemsToDisplay").children();
					if(items.length > 0) {
					s.populateItems(items);
					FreshShovelerMeta.arrangeItems(s);
					jQuery(window).resize(function() { FreshShovelerMeta.arrangeItems(s); });
					s.bindPaginationEvents();
						FreshShovelerMeta.tagItems(s);
			FreshShovelerMeta.checkAsins(s);
					}
					}
				},
				zeitgeist: {
				itemWidth: 137,
				getParams: function() {
			this.rankType = getParam(this.shoveler, "rankType");
			this.listId = getParam(this.shoveler, "listId");
			},
				getItems: function() {
			var s = this; // hooray js scoping!
			var args = {
			action: 'zeitgeist',
			listId: this.listId,
			rankType: this.rankType,
			source: s.id
			};
			var success = function(ajax) {
			if(jQuery.trim(ajax) == "") { // hide widget if there are no items
			s.shoveler.hide();
			} else {
			s.populateItems(ajax);
			FreshShovelerMeta.arrangeItems(s);
			jQuery(window).resize(function() { FreshShovelerMeta.arrangeItems(s); });
			s.bindPaginationEvents();
			FreshShovelerMeta.tagItems(s);
			FreshShovelerMeta.checkAsins(s);
			}
			};
			jQuery.get("shoveler", args, success);
				}
				},
				// ASIN LIST SHOVELER takes an arbitrary list of asins, either from the url path or from an input
				asinList: {
				itemWidth: 137,
				getItems: function() {
				var s = this;
				if(this.isMinDisplay == null) { this.isMinDisplay = "false"; }
				if(this.isMinDisplay) {
					//isMinDisplay appears to never be used/
					this.shoveler.find("img.loading").css("top", "60px");
				this.shoveler.find("div.body").css("height", "150px");
				this.shoveler.find("div.backButton, div.nextButton").css("top", "65px");
				}
				
				var suppressProductLink = getParam(this.shoveler, "suppressProductLink");
				if(suppressProductLink == null) { suppressProductLink = "false"; }
				var rawParams = window.location.search.substr(1).split("&");
				var asins = getParam(this.shoveler, "asins");
				if(asins == null || asins == "") {
					for(var i = 0; i < rawParams.length; i++) {
					var pair = rawParams[i].split("=");
					if(pair[0] == "asins") {
						asins = pair[1];
						break;
					}
					}
				}
			var uid = null;
			for(var i = 0; i < rawParams.length; i++) {
			var pair = rawParams[i].split("=");
			if(pair[0] == "id") {
			uid = pair[1];
			break;
			}
			}
				jQuery.get("shoveler",
					{ action: "asinlist", isMinDisplay: this.isMinDisplay, suppressProductLink: suppressProductLink, asins: asins, uid: uid },
					function(ajax) {
						if(jQuery.trim(ajax) == "") { // hide widget if there are no items
				s.shoveler.hide();
				} else {
				s.populateItems(ajax);
				FreshShovelerMeta.arrangeItems(s);
				
				jQuery(window).resize(function() { FreshShovelerMeta.arrangeItems(s); });
				s.bindPaginationEvents();
								FreshShovelerMeta.tagItems(s);
				if(!s.isMinDisplay) { FreshShovelerMeta.checkAsins(s); }
				}
					}
				);
				}
				},
				},
				loadFreshShoveler: function() {
					if(null != this.getExtraParams) { this.getExtraParams(); }
				this.shoveler.wrap("<div class='"+ this.displayType+"'></div>");
				// create shoveler framework
				this.shoveler.append(FreshShovelerMeta.shovelerTemplate.clone());
				this.shoveler.find(".shovelerPagination").hide();
				this.shoveler.find(".shovelerItems").append(FreshShovelerMeta.loadingImage.clone());
				this.shoveler.find("h2").text(this.header);
				this.getItems();
				},
			populateItems: function(items) {
				var s = this;
				s.shoveler.find(".loading").remove();
				s.shoveler.find(".shovelerItems").append(items);
				s.items = s.shoveler.find(".shovelerItem");
				s.items.each(function(i) {
				jQuery(this).attr("id", s.id+"Item_"+i);
				});
				},
				arrangeItems: function(s) {
					if(s.displayType != 'underCart') {
						var containerWidth = s.shoveler.find(".shovelerItems").width();
					s.capacity = Math.floor(containerWidth / s.type.itemWidth) - 1;
					var totalMargin = containerWidth - (s.capacity * s.type.itemWidth);
					s.perItemMargin = totalMargin / (s.capacity + 1);
				s.currentItem = 0;
				s.currentPage = 0;
				s.pageCount = Math.ceil(s.items.length / s.capacity);
				
				FreshShovelerMeta.scrollItems(s);
					s.shoveler.find(".pageCount").empty().append(s.pageCount);
					s.shoveler.find(".shovelerPagination").show();
					
			if (s.firstLoad) {
			var bodyHeight =  s.shoveler.find(".body").height();
			
				if (s.shoveler.find(".pleaseSignIn").size() > 0) {
				bodyHeight += 10;
				}
				
				if (s.shoveler.find(".availabilityMessage").size() > 0) {
				bodyHeight += 20;
				}
				s.shoveler.find(".body").height(bodyHeight);
				s.firstLoad = false;
			}
					} else {
						
				s.items.each(function(i) {
					if (i > 5) { jQuery("#" + s.id+"Item_"+i).hide(); }
				});
					}
				},
				adjustShovelerHeight: function(s) {
					var maxShovelerItemHeight = 0;
					s.shoveler.find("div.shovelerItem").each(function() {
						var height = jQuery(this).height();
						if(height > maxShovelerItemHeight) {
							maxShovelerItemHeight = height;
						}
					});
					if(s.type == FreshShovelerMeta.ShovelerTypes.hero) {
				var heroSpotHeight = s.shoveler.find(".heroSpotContainer").height();
				s.shoveler.css("height", heroSpotHeight + maxShovelerItemHeight + 55);
					} else if(s.displayType != 'underCart') { // this will support all standard shovelers
						s.shoveler.find("div.body").css("height", maxShovelerItemHeight);
					}
				},
				showPrev: function(s) {
				s.currentPage = (s.currentPage + s.pageCount - 1) % s.pageCount; // pre-emptively handle negative mod
				FreshShovelerMeta.scrollItems(s);
				},
				showNext: function(s) {
					s.currentPage = (s.currentPage + 1) % s.pageCount;
					FreshShovelerMeta.scrollItems(s);
				},
				scrollItems: function(s) {
					var autoWidthAdjust = 0;
					if(s.type == FreshShovelerMeta.ShovelerTypes.hero) {
						autoWidthAdjust = s.shoveler.offset().left;
					}
				s.items.hide();
				var startIndex = s.currentPage * s.capacity,
				endIndex = Math.min(s.items.length, startIndex + s.capacity),
				position = 0;
				for(var i = startIndex; i < endIndex; i++) {
					jQuery(s.items[i]).css({ left: (s.type.itemWidth + s.perItemMargin) * position + s.perItemMargin + s.paginatorGutter + autoWidthAdjust}).show();
					position++;
				}
				s.shoveler.find(".currentPage").empty().append(s.currentPage+1);
				},
				tagItems: function(s) {
					var tag = getParam(s.shoveler, "csTag");
					if (tag) {
					s.shoveler.find("div.shovelerItem").each(function() {
					var item = jQuery(this);
						var pfref = item.attr("id");
						item.find("a").each(function() {
							var linkTag = jQuery(this);
							var currentHref = linkTag.attr("href");
							linkTag.attr("href",currentHref+tag+"&pf_ref="+pfref+"_link"+"&ref_=cs_"+pfref);
						});
					
					s.shoveler.find("input.csTag").each(function() {
						var tagItem = jQuery(this);
								item.find("form.addToCartForm").append(jQuery("<input type='hidden' name='"+tagItem.attr("name")+"' value='" + tagItem.attr("value")+"'/>"));
					});
					item.find("form.addToCartForm").append(jQuery("<input type='hidden' name='pf_ref' value='" + pfref+"_cart'/>"));
				item.find("form.addToCartForm").append(jQuery("<input type='hidden' name='ref_' value='cs_" + pfref+"'/>"));
					});
					}
				},
				checkAsins: function(s) {
				s.shoveler.find("div.shovelerItem").each(function() {
				var item = jQuery(this);
				var expectedAsin = item.find("input[name='expectedAsin']").attr("value");
				var addToCartAsin = item.find("input[name='addToCartAsin']").attr("value");
				if(expectedAsin != addToCartAsin) {
				jQuery.get("ping?badShovelerAsins&expected="+expectedAsin+"&actual="+addToCartAsin+"&shoveler="+s.id);
				item.find("form.addToCartForm input[name='asin']").attr("value", expectedAsin);
				}
				});
				},
				loadAllShovelers: function() {
					var widgets = jQuery("div.shovelerWidget, div.heroWidget");
				if(widgets.length > 0) {
				widgets.each(function(i) {
				var targetId = jQuery(this).attr("id");
				var widget = new FreshShoveler(targetId);
				widget.load();
				});
				}
				}
			}
			function getParam(parent, name) { return parent.find("input[name='"+name+"']").attr("value"); }
			function isEmpty(string) { string = jQuery.trim(string); return (string == null || string == ""); }
		</script>
		<script type="text/javascript">
			jQuery(document).ready(function() {
				jQuery(".recipeWidget").each(function(index) {
				var widget = jQuery(this);
				var recipeIdsString = widget.html();
					jQuery.post("recipeWidget", { recipeIds: recipeIdsString },
					function(data) {
					if (data.length > 0) {
					widget.html(data);
					widget.show();
					truncateRecipeTitles(widget);
					}
					}
				);
				});
			});
			function truncateRecipeTitles(widget) {
				widget.find(".text").each(function(index) {
					var textDiv = jQuery(this);
					var n = parseInt(textDiv.css("line-height"));
					var text = textDiv.html();
				
				if (textDiv.height() == n) {
					// center when one line
					textDiv.css("margin-top", n +"px");
				} else if (textDiv.height() > 2*n) {
					// add ellipsis
					text = text + "...";
					textDiv.html(text);
				}
				// reduce lenght until it fits
				while (textDiv.height() > 2*n) {
					text = text.substr(0, text.length - 4) + "...";
					textDiv.html(text);
				}
				textDiv.css("max-height", (2*n) + "px");
				textDiv.css("overflow", "hidden");
					});
			}
		</script>
		<script language="javascript" type="text/javascript">
			Function.prototype.bind = Function.prototype.bind || function (thisp) {
			var fn = this;
			return function () {
			return fn.apply(thisp, arguments);
			};
			};
			function submitOnlyOnce(theForm){
			if (jQuery(window.parent.jQuery(".inCart")).length) {
			var asin = jQuery(theForm.asin).val();
			var quantity = jQuery(theForm.quantity).val();
			if (quantity == 0) {
			jQuery(window.parent.jQuery("." + asin + "-asin")).trigger("showPastPurchaseTag-" + asin);
			}
			}
				jQuery(jQuery(theForm).find("button[type=submit], input[type=image], input[type=submit], input[type=button]").attr("disabled", "disabled"));
			}
			function disableLink(theLink) {
				jQuery(theLink).click(function(e) { return false; });
			}
			function refreshShoppingCart() {
				jQuery("#shopping-cart").attr("src", "ShoppingCartView");
			}
			var cartEventListeners = [];
			function addCartEventListener(listener){
				cartEventListeners.push(listener);
			}
			function cartReloadEvent(cartInfo){
				for(index in cartEventListeners) {
					cartEventListeners[index](cartInfo);
					}
			}
			function truncateTitle(title) {
			var height = title.height();
			title.css("height", "auto");
			title.css("max-height", 200);
			title.css("overflow", "hidden");
			var anchor = title.find("a"),
			text = anchor.text();
			while (text.length > 0 && title.height() > height) {
			text = text.substr(0, text.length - 1);
			anchor.html(text + "&#8230");
			}
			title.css("max-height", "30px");
			}
			var warnOfInvalidItems = true;
			function updateAddAllToCartButton(event) {
			var validList = "";
			var invalidList = "";
			
			jQuery(".listItem").each(function(index) {
			var item = jQuery(this);
			var conflictInput = item.find("input[name='conflictWithSlot']");
			if (item.find(".itemUnavailableText").size() > 0 || item.find(".discontinued").size() > 0) {
			// Ignore unavailable and discontinued items
			} else if (conflictInput.size() == 0 || conflictInput.val() == "false") { // skip invalid items
			var quantity = item.find(".addToCart input[name='quantity']");
			
			if (quantity.size() > 0 && quantity.val() > 0) {
			var asin = item.attr("id");
			var merchantId = item.find(".addToCart input[name='merchantId']").val();
			validList += asin + "|" + quantity.val() + "|" + merchantId + ",";
			}
			} else {
				invalidList +="<li>" + item.find(".itemTitle a").html() + "</li>";
			}
			});
			jQuery(this).find("input[name='itemDetails']").val(validList);
			// show message if invalid items cannot be added
			if (warnOfInvalidItems && invalidList != "") {
			event.preventDefault();
			var message = "These items are not available for delivery <strong>" + jQuery("#headerNav #selectday a").html() + "</strong> and will NOT be added to your cart:<ul>";
						
						message += invalidList;
			message +="</ul>";
			message += "<button id='addAllAvailableItemsToCart'>Continue without These Items</button>&nbsp;&nbsp;";
			message += "<button class='nevermind'>Nevermind</button/>";
			
			showOnDemandLightboxWithContent(message, jQuery(this));
			
			jQuery("#addAllAvailableItemsToCart").click(function() {
			warnOfInvalidItems = false;
			jQuery("#addAllToCart").submit();
			hideLightbox();
			});
			}
			
			warnOfInvalidItems = true;
			}
			function showAddToCartLightbox(form, message) {
				showOnDemandLightboxWithContent(message, form, function() {
			var lightbox = jQuery("#lightbox");
			var atcButtons = lightbox.find("#addToCartButtons");
			var totalWidth;
			if (atcButtons.size() > 0) {
				totalWidth = atcButtons.find("form[name='UseSlotAndAddToCart']").width()
				+ atcButtons.find("form[name='ClearSlot']").width()
				+ atcButtons.find(".nevermind").width();
			} else {
				totalWidth = 400;
			}
			lightbox.width(Math.max(300, totalWidth + 110));
			lightbox.find(".itemTitle").width(lightbox.width() - 150);
			});
			}
			function setPostAddCookie(e) {
			document.cookie="freshPostSlotAdd=true;"
			return true;
			}
			function removePostAddCookie() {
			var cookie_date = new Date ();
			cookie_date.setTime ( cookie_date.getTime() - 1 );
			document.cookie = "freshPostSlotAdd=; expires=" + cookie_date.toGMTString();
			}
			function showLoadingSpinner(event){
				var spinnerTextList = new Array(
						"We're processing your order.",
						"More items can be added after your order is placed.",
						"Download our mobile apps to shop any time, anywhere.",
						"Discover local favorites on your city's Spotlight page.",
						"We offer a 100% grocery satisfaction guarantee.",
						"Get your shopping done fast with one-click recipes.",
						"Thank you for shopping on AmazonFresh.",
						"Easily find your favorites in Past Purchases.",
						"We look forward to serving you.",
						"Your order will arrive in temperature-controlled bags.",
						"Please leave your porch light on for our drivers.",
						"Save time by creating Your Lists.");
				
				/* Using a short timeout hack to ensure that we do not encounter freezing GIF problems in IE on form post -npprabhu */
				setTimeout(function() {
					var isInIframe = window.location != window.parent.location;
					var spinnyBlock;
					if (isInIframe) {
						spinnyBlock = jQuery("#orderProcessing", window.parent.document);
					} else {
						spinnyBlock = jQuery("#orderProcessing");
					}
					
					spinnyBlock.show();
					
					var spinnyText = spinnyBlock.find("#spinnerText");
					var txtCounter = 0;
					setInterval(function(){
						txtCounter++;
						spinnyText.html(spinnerTextList[txtCounter]);
						if(txtCounter == (spinnerTextList.length - 1)){
							txtCounter = -1;
						}
					}, 5000);
					
					var spinnyImage = spinnyBlock.find("#greenTruck");
					var imgCounter = 0;
					var imgPos = parseInt(spinnyImage.css("left"));
					setInterval(function(){
						imgCounter++;
						spinnyImage.css("left", imgPos + (200 * imgCounter));
						if(imgCounter == 2) {
							imgCounter = -1;
						}
					}, 1000);
					
				}, 50);
			}
			jQuery(document).ready(function() {
			handleDeliveryNotes();
			jQuery("#placeOrderForm, form[action='UpdateOrder']").submit(showLoadingSpinner);
			jQuery(".buying .variationRadio").live('click',changeVariationEventHandler);
			jQuery(".smallProduct .variationRadio ").live('click',changeVariationEventHandler);
			jQuery(".shovelerItem .variationRadio ").live('click',changeVariationEventHandler);
			jQuery(".mobileBody .variationRadio ").live('click',changeVariationMobileEventHandler);
			
			jQuery(document).ajaxError(function(event, request, settings, exception) {
			if (401 === request.status) {
			window.location.href = "/Authenticate?signInSuccessUrl=" + encodeURIComponent(location.pathname);
			return true;
			}
			return false;
			});
			});
			function handleDeliveryNotes() {
			jQuery("#editDeliveryInstructions").click(function() {
			var content = jQuery("#deliveryInstructionsLightboxWrapper");
			showOnDemandLightboxWithContent(content.html());
			attachCustomerDeliveryNotesClipHandler();
			});
			attachCustomerDeliveryNotesClipHandler();
			}
			//Limit customer delivery notes input to 255 characters, as we claim.
			function attachCustomerDeliveryNotesClipHandler() {
			var clipCustomerDeliveryNotes = function(event) {
			var textArea = jQuery('.customerDeliveryNotesInput');
			var textValue =  textArea.val();
			if (textValue.length > 255) {
			textValue = textValue.slice(0, 255);
			textArea.val(textValue);
			textArea.scrollTop(textArea[0].scrollHeight);
			}
			};
			jQuery('.customerDeliveryNotesInput').keydown(clipCustomerDeliveryNotes);
			jQuery('.customerDeliveryNotesInput').keyup(clipCustomerDeliveryNotes);
			jQuery('.customerDeliveryNotesInput').change(clipCustomerDeliveryNotes);
			}
			function changeVariationEventHandler(event) {
			if(event.isPropagationStopped()) return;
			event.stopPropagation();
			$this = jQuery(this);
			var asin_id = $this.attr("value");
			var asin = asin_id.split("_")[0];
			var showItemId = jQuery(this).parent(".variationSelection").parent().find(".var_".concat(asin_id));
			var showItem = jQuery(this).parent(".variationSelection").parent().find(".var_".concat(asin));
			jQuery(this).closest(".variationSelection").parent().find(".variation").hide();
			showItemId.show();
			showItem.show();
			}
			function changeVariationMobileEventHandler(event) {
			if(event.isPropagationStopped()) return;
			event.stopPropagation();
			$this = jQuery(this);
			var asin = jQuery(this).attr("value");
			var showItem = jQuery(this).parents(".variationSelection").parent().find(".var_".concat(asin));
			$this.closest(".variationSelection").parent().find(".variation").hide();
			showItem.show();
			}
		</script>
		<script type="text/javascript" src="https://images-na.ssl-images-amazon.com/images/G/01/omaha/js/searchResultsWidget._V1410555730_.js"></script>
		<script type="text/javascript" src="https://images-na.ssl-images-amazon.com/images/G/01/omaha/js/advertWidget._V1426107391_.js"></script>
		<script type="text/javascript">
			var SingleBuyWidget = {
			loadingImage: jQuery("<img src='https://images-na.ssl-images-amazon.com/images/G/01/ui/loadIndicators/loading-large.gif' class='loading' alt='Loading...'/>"),
			addToCartIfAvailableHandler: function(event) {
			var button = event.target;
			var form = jQuery(button).parents("form");
			event.preventDefault();
			var asin = form.find("input[name='asin']").val();
			var quantity = 1; //The quantity is hardcoded for the SingleBuyWidget
			var ajaxAttrs = {"asin": asin, "quantity": quantity, "addCartRefer": document.URL};
			jQuery(".singleBuyWidget").each(function(index) {
			var widget = jQuery(this);
			var button = widget.find("button[type='submit']");
			button.addClass("singleBuyWaiting");
			button.attr("disabled", "disabled");
			});
			jQuery.ajax({
			type: "post",
			url: "/AvailableForAddToCart?",
			data: ajaxAttrs,
			success: function(data, text) {
			SingleBuyWidget.addToCartEventHandler(event);
			},
			error: function(request, status, error) {
			//TODO What to do?
			jQuery(".singleBuyWidget").each(function(index) {
			var widget = jQuery(this);
			var button = widget.find("button[type='submit']");
			button.removeAttr("disabled");
			button.removeClass("singleBuyWaiting");
			});
			}
			});
			},
			addToCartEventHandler: function (event) {
			event.preventDefault();
			var form = jQuery(event.target).parents("form");
			SingleBuyWidget.addToCartByForm(form);
			},
			addToCartByForm: function (form) {
			var params = ["quantity", "asin", "refId", "qid", "rank"];
			var values = {};
			for(var i = 0; i < params.length; i++) {
			var param = params[i];
			values[param] = form.find("input[name='"+param+"']").val();
			}
			SingleBuyWidget.addToCart(form, values);
			},
			addToCart: function (form, values) {
			jQuery.get("/CartAPI",
			{'action':'addItem', 'quantity':values['quantity'],'asin':values['asin'],'refId':values['refId'],'qid':values['qid'],'rank':values['rank'],'sr':'1-'+values['rank']},
			function(data, textStatus){
			var quantityInCart = parseInt(form.find("input[name='quantityInCart']").val(), 10);
			if(isNaN(quantityInCart)) {
			quantityInCart = 0;
			}
			quantityInCart += 1;
			jQuery(".singleBuyWidget").each(function(index) {
			var widget = jQuery(this);
			var proceedButton = widget.find(".singleBuyProceedButton");
			proceedButton.show();
			proceedButton.find(".singleBuyQuantity").text(quantityInCart + " added to cart");
			var button = proceedButton.find("button[type='submit']");
			button.removeAttr("disabled");
			button.removeClass("singleBuyWaiting");
			var singleBuyAddToCart = widget.find(".singleBuyAddToCart");
			singleBuyAddToCart.hide();
			});
			},
			'html');
			},
			loadAllSingleBuyWidgets: function() {
			jQuery(".singleBuyWidget").each(function(index) {
			var widget = jQuery(this);
			//widget.append(SingleBuyWidget.loadingImage.clone());
			var asin = widget.find("input[name='asin']").attr("value").trim();
			var buttonClass = widget.find("input[name='buttonClass']").attr("value").trim();
			jQuery.get("/singleBuyWidget", { asin: asin, buttonClass: buttonClass },
			function(sbwidget) {
			if(jQuery.trim(sbwidget) == "") {
			widget.hide();
			} else {
			//widget.find(".loading").remove();
			widget.append(sbwidget);
			widget.find("form.singleBuyAddToCartForm button[type='submit']").live('click', SingleBuyWidget.addToCartIfAvailableHandler);
			widget.find("a.singleBuyDisabled").css('cursor', 'pointer');
			}
			});
			});
			}
			}
			jQuery(document).ready(SingleBuyWidget.loadAllSingleBuyWidgets);
		</script>
		<script type="text/javascript">
			var DashBuyWidget = {
			loadingImage: jQuery("<img src='https://images-na.ssl-images-amazon.com/images/G/01/omaha/images/ui/loading-large-transparent.gif' class='loading' alt='Loading...'/>"),
			addToCartEventHandler: function (event) {
			var form = jQuery(event.target);
			DashBuyWidget.addToCartByForm(form);
			event.preventDefault();
			},
			addToCartByForm: function (form) {
			var $form = jQuery(form);
			var request = {};
			jQuery.each($form.find("input[type=hidden]"), function(i, field) {
			$field = jQuery(field);
			request[$field.attr("name")] = $field.val();
			});
			$button = $form.find("button");
			
			$button.hide();
			$form.append(DashBuyWidget.loadingImage.clone());
			jQuery.ajax({
			url: "/CartAPI",
			type: "POST",
			data: request,
			success: function(data, textStatus) {
				$div = $button.parent().closest("div");
				$div.empty();
				jQuery("#alreadyOrderedWrapper").show();
			},
			complete: function(){
			$form.find("img").remove();
			$button.show();
			}
			})
			},
			loadAllDashBuyWidgets: function() {
			jQuery(".dashBuyWidget").each(function(index) {
			var widget = jQuery(this);
			widget.append(DashBuyWidget.loadingImage.clone());
			var asin = widget.find("input[name='asin']").attr("value").trim();
			var buttonClass = widget.find("input[name='buttonClass']").attr("value").trim();
			jQuery.get("/dash/dashBuyWidget", { asin: asin, buttonClass: buttonClass },
			function(sbwidget) {
			if(jQuery.trim(sbwidget) == "") {
			widget.hide();
			} else {
			widget.find(".loading").remove();
			widget.append(sbwidget);
			widget.find("form.dashBuyAddToCartForm").live('submit', DashBuyWidget.addToCartEventHandler);
			widget.find("a.dashBuyDisabled").css('cursor', 'pointer');
			DashBuyWidget.attachMPSelectEventHandlers();
			}
			});
			});
			},
			
			getUrlWithoutBrowseMPParameter: function() {
				var url = parent.location.href;
			var splitURL = url.split("browseMP=");
			
			if (splitURL.length > 1) {
			var splitParams = splitURL[1].split("&");
			url = splitURL[0];
			if (splitParams.length > 1) {
			url +=splitParams[1];
			}
			}
			
			return url;
			},
			
			attachMPSelectEventHandlers: function() {
				jQuery("#dashMpSelect a").click(function(event) {
					event.preventDefault();
					jQuery("#dashMpSelect select").toggle();
				});
				
			jQuery("#dashMpSelect").change(function() {
			var url = DashBuyWidget.getUrlWithoutBrowseMPParameter();
			url += (url.indexOf('?') > -1) ? "&" : "?";
			url += "browseMP=" + jQuery(this).find("select").val();
			parent.location.href = url;
			});
			}
			}
			jQuery(document).ready(DashBuyWidget.loadAllDashBuyWidgets);
		</script>
		<script type="text/javascript">
			function isGateway() {
				var path = window.location.pathname;
			return (path.substr(path.length-8, path.length) == "/Gateway") || (path == "/") || (path == "/str/");
			}
		</script>
		<script type="text/javascript">
			// Fix anything marked with id="dialogBox" or the centeredPopover class to the center of the window
			function centerPopover() {
			var $win = jQuery(window);
			var $popover = jQuery("#dialogBox,.centeredPopover");
			$popover.css({
			'left': ($win.width() - $popover.width()) / 2 + $win.scrollLeft(),
			'top': ($win.height() - $popover.height()) / 2 + $win.scrollTop()
			});
			}
			jQuery(window).scroll(centerPopover);
			jQuery(window).resize(centerPopover);
			jQuery("#dialogBox,.centeredPopover").ready(centerPopover);
			// replace the "hover" menus with "tap" menus for iPads and such
			if ('ontouchstart' in window) {
				jQuery(function($) {
					$("#stripeMenu li:has('.stripeHover') a").click(function() {
						this.parent.toggleClass("expanded");
						return false;
					});
				});
			}
			// now bestsellers tab
			var nowBestsellers = {
				box: null,
				items: null,
				waitInterval: 3000,
				currItem: 0
			};
			jQuery(function() {
			FreshShovelerMeta.loadAllShovelers();
			});
			jQuery(document).ready(function() {
			var $search = jQuery("#topNav").find("input#search, input#searchAutocomplete");
			if (!('placeholder' in document.createElement('input'))) {
			// placeholder is not supported in this browser
				if ('' == $search.val() && !($search.get(0) == document.activeElement)) {
					$search.val('Search');
				}
			$search.focus(searchFieldFocus)
			.blur(searchFieldBlur);
			}
			attachPlaceholders();
			bindQuantityButtonListeners();
			});
			function bindQuantityButtonListeners() {
			jQuery(".quantityButtonInner").live('click',openQuantityPopover);
			jQuery(".quantityDropDownItem").live('click',closeQuantityPopover);
			var hoverTimeout;
			jQuery(".quantityPopoverWrapper").hover(function() {
			clearTimeout(hoverTimeout);
			}, function() {
			var popover = jQuery(this);
			hoverTimeout = setTimeout(resetQuantityBoxes, 5000);
			});
			jQuery(document).click(resetQuantityBoxes);
			jQuery(window).resize(resetQuantityBoxes);
			}
			function searchFieldFocus(event) {
			var field = jQuery(event.target);
			if (field.val() == "Search") {
			field.val("")
			.css("color", "black");
			}
			}
			function searchFieldBlur(event) {
			var field = jQuery(event.target);
			if (field.val() == "") {
			field.val("Search")
			.css("color", "#999999");
			}
			}
			jQuery.fn.simplePopover = function(options) {
			var $ = jQuery;
				var defaults = {
						success: function() {},
						cancel: function() {}
				}
				if (!options) { options = {}};
				var settings = $.extend({}, defaults, options);
				var $alpha = $('#alphaLayer');
				$alpha.addClass('disablePage');
				var $popover = $('<div class="simplePopoverWrapper"><div class="simplePopover">' + this.html() + '</div></div>').appendTo('body');
				var $form = $popover.find("form");
				var closePopover = function() {
			$alpha.removeClass('disablePage');
			$popover.remove();
				}
				var cancel = function() {
					closePopover();
					settings.cancel();
					return false;
				}
				$popover.find(".closeWindow").click(cancel);
				$form.submit(function() {
					var url = $form.attr("action");
					var extraParams = settings.extraParams;
					$.post(url, $form.serialize() + extraParams, function(data, textStatus, xhr) {
						closePopover();
						settings.success(data, textStatus, xhr);
					});
					return false;
				});
				$form.find(":reset").click(cancel);
				return $popover;
			};
			function appendOrReplaceResultsPerPage(link, resultCount) {
			var resultsPerPage = "resultsPerPage";
			var href = link.attr("href");
			var hasResultsPerPage = href.indexOf(resultsPerPage) >= 0;
			if (!hasResultsPerPage){
			var delimiter = (href.indexOf("?") < 0) ? "?" : "&";
			link.attr("href", href + delimiter + resultsPerPage + "=" + resultCount);
			} else {
			link.attr("href", href.replace(/resultsPerPage=\d*/g, resultsPerPage + "=" + resultCount));
			}
			};
			function calculateSearchResultCount() {
			var resultSpaceWidth = jQuery(window).width() - 30 - 288;
			var searchItemWidth = 162;
			var resultsPerRow = Math.floor(resultSpaceWidth / searchItemWidth);
			var searchResultCount = resultsPerRow * 6;
			return searchResultCount;
			}
			function calculatePPResultCount() {
			var resultSpaceWidth = jQuery(window).width() - 30 - 288;
			var ppItemWidth = 96,
				ppResultsPerRow = Math.floor(resultSpaceWidth / ppItemWidth),
					ppResultCount = ppResultsPerRow * 4;
			return ppResultCount;
			}
			jQuery(document).ready(function() {
			var resultCountInput = jQuery("form#freshSearchForm").find("input[name=resultsPerPage]");
			
			if (resultCountInput.length == 0)
			return;
			var searchResultCount = calculateSearchResultCount();
			resultCountInput.val(searchResultCount);
			var ppResultCount = calculatePPResultCount();
			// any links that go to Search pages, Past Purchases or CouponDetails should have a resultsPerPage parameter
			jQuery("a[href*='/Search']").each(function() {
			appendOrReplaceResultsPerPage(jQuery(this), searchResultCount);
			});
			jQuery("a[href*='Favorites']").each(function() {
				appendOrReplaceResultsPerPage(jQuery(this), ppResultCount);
			});
			
			jQuery("a[href*='/CouponDetails']").each(function() {
			appendOrReplaceResultsPerPage(jQuery(this), ppResultCount);
			});
			
			setResultCountForPastPurchases(ppResultCount);
			
			setupWelcomeMessage();
			});
			function setupWelcomeMessage() {
			jQuery("#refreshwelcome").focus().blur(function() {
			dismissWelcomeMessage();
			});
			}
			function dismissWelcomeMessage() {
			jQuery('#refreshwelcomecontainer').hide();
			jQuery('#refreshwelcomeboxblockout').hide();
			}
			function setResultCountForPastPurchases(resultCount) {
				var anchors = [],
					ppLink = jQuery("#lnk-tab-lists");
				if (ppLink.length > 0) {
					anchors.push(ppLink);
				}
				var ppForm = jQuery("#pastPurchases form#pastPurchasesSearch");
				if (ppForm.length > 0) {
					ppForm.find("input[name=resultsPerPage]").val(resultCount);
				}
				
							var	aisles = jQuery("#pastPurchases div#filterByAisle");
				if (aisles.length > 0) {
					aisles.find("a").each(function(index) {
						anchors.push(jQuery(this));
					});
				}
				
				if (document.location.pathname.indexOf("/MyList") < 0 && document.location.pathname.indexOf("/ViewList") < 0) {
					var pagination = jQuery("#pastPurchases div.pagination");
					if (pagination.length > 0) {
						pagination.find("a").each(function(index) {
							anchors.push(jQuery(this));
						});
					}
				}
			var breadcrumb = jQuery("#breadcrumb");
				if (breadcrumb.length > 0) {
					// remove the first one, as it will be "Amazon Fresh", which doesn't need it.
					breadcrumb.find("a").slice(1).each(function(index) {
				anchors.push(jQuery(this));
				});
				}
				
				for (var i = 0; i < anchors.length; i++) {
			var link = jQuery(anchors[i]),
				href = link.attr("href");
			if (href.indexOf("?") >= 0) {
				link.attr("href", href + "&resultsPerPage=" + resultCount);
			} else {
				link.attr("href", href + "?resultsPerPage=" + resultCount);
			}
				}
			}
			function buildCallOnLoadParameter(functionName, arguments) {
				var parameter = 'callOnLoad=' + functionName;
				for (var i = 0; i < arguments.length; i++) {
					parameter += '-' + arguments[i];
				}
				return parameter;
			}
			function redirectToSecureWithCall(functionName, arguments) {
				var port = location.port ? location.port : '';
				var autoCallParameter = buildCallOnLoadParameter(functionName, arguments);
				var search = (location.search ? location.search + '&' : '?') + autoCallParameter;
				
			if (port == '80') {
			port = '443';
			} else if (port == '8989') {
			port = '8443';
			}
			
			window.location = 'https://' + location.hostname + (port ? ':' + port : '') + location.pathname + search;
			}
			function openQuantityPopover(event) {
			event.stopPropagation();
			var popover = jQuery(this).siblings(".quantityPopoverWrapper");
			jQuery(".quantityPopoverWrapper").removeAttr("style");
			jQuery(".quantityPopoverWrapper").each(function() {
			if (jQuery(this) !== popover) {
			jQuery(this).hide();
			}
			});
			popover.show();
			if (popover.offset().top + popover.height() > jQuery(window).scrollTop() + jQuery(window).height() && popover.offset().top - popover.height() < jQuery(window).scrollTop()) {
			popover.css("height", jQuery(window).scrollTop() + jQuery(window).height() - popover.offset().top);
			popover.css("overflow-y", "scroll");
			}
			else if (popover.offset().top + popover.height() > jQuery(window).scrollTop() + jQuery(window).height()) {
			popover.css("bottom", "-1px");
			popover.css("top", "auto");
			}
			}
			function closeQuantityPopover(event) {
			event.stopPropagation();
			event.preventDefault();
			var newValue = jQuery(this).find("a").text();
			var popover = jQuery(this).parents(".quantityPopoverWrapper");
			popover.find(".quantityDropDownItem").removeClass("selected");
			jQuery(this).addClass("selected");
			var quantityWrapper = popover.parents(".addToCartQuantityWrapper");
			quantityWrapper.find(".quantityButtonPrompt").text(newValue);
			var addToCartForm = quantityWrapper.siblings(".addToCartForm");
			addToCartForm.find(".addToCartQuantity").val(newValue);
			popover.removeAttr("style");
			popover.hide();
			}
			function resetQuantityBoxes(event) {
			if(event.isPropagationStopped()) return;
			jQuery(".quantityPopoverWrapper").removeAttr("style");
			jQuery(".quantityPopoverWrapper").hide();
			}
			function showNewExperienceAddToCart(){
			if(jQuery("#lb-ondemand").children().length == 0) {
			jQuery.get("newShoppingExperience?currentPage=AddToCart", function(data) {
			if(jQuery.trim(data).length>0){
			var target = "target";
			if(data.indexOf(target) == -1 ){
			showOnDemandLightboxWithContent(data);
			jQuery("#lightbox").css("width", 650);
			jQuery("#lightbox").css("border-radius", 10);
			jQuery("#lb-cancel").hide();
			jQuery("#editMultipleButton").click(function() {
			jQuery.get("chooseExperience?legacy=EditOrder", function(data) {
			location.href = "AllOrders";
			});
			});
			jQuery("#completeOrder").click(function() {
			jQuery.get("chooseExperience?legacy=CompleteOrder", function(data) {
			hideLightbox();
			});
			});
			jQuery("#legacyLink").click(function() {
			jQuery.get("chooseExperience?legacy=ShopAcrossRegion", function(data) {
			location.href = "splashDelivery";
			});
			});
			}
			}
			});
			}
			}
			function transitToOrderDetail() {
			jQuery.get("chooseExperience?legacy=EditOrder", function(data) {
			jQuery("#orderDetailForm").submit();
			});
			}
			function transitToOrderDetailFromLink() {
			jQuery.get("chooseExperience?legacy=EditOrderLink", function(data) {
			jQuery("#orderDetailForm").submit();
			});
			}
			function transitToAllOrders() {
			jQuery.get("chooseExperience?legacy=EditOrderLink", function(data) {
			location.href = "AllOrders";
			});
			}
			function setChosenExperienceAndGoToAmazon(ref) {
			var url = 'chooseExperience?legacy=ShopOnAmazon';
			jQuery.get(url, function(data) {
			location.href = ref;
			});
			}
			function goToAmazonFromLink(ref) {
			var url = 'chooseExperience?legacy=ShopOnAmazonLink';
			jQuery.get(url, function(data) {
			location.href = ref;
			});
			}
			// Start AddToCartIfAvailable specific functions
			function addToCartAvailable(button) {
			showNewExperienceAddToCart();
				return addToCartAvailableAjax(jQuery(button).parent());
			}
			function addToCartAvailableAjax(form) {
			var asin = form.find("input[name='asin']").val();
				var quantity = form.find("input[name='quantity']").val();
				if (quantity == null) quantity = 1;
				
				var ajaxAttrs = {"asin": asin, "quantity": quantity, "addCartRefer": document.URL};
				
				jQuery.ajax({
					type: "post",
					url: "/AvailableForAddToCart?",
					data: ajaxAttrs,
					success: function(data, text) {
						if (data.indexOf('id="addToCartLightbox"') >= 0) {
							showAddToCartLightbox(form, data);
						} else {
							form.submit();
						}
					},
					error: function(request, status, error) {
						form.submit();
					}
				});
				
				return false;
			};
			//End AddToCartIfAvailable specific function
			// For browsers (such as IE8 and IE9) that do not support HTML5's placeholder feature
			function attachPlaceholders() {
			if ('placeholder' in document.createElement('input')) {
			return;
			}
			
					jQuery("#welcome input").each(function() {
				var input = jQuery(this);
				var placeholder = input.attr("placeholder");
				
				if (typeof placeholder == 'undefined' || placeholder == false) {
				return;
				}
				
				input.parent().css("position", "relative");
				input.parent().append("<div class='placeholderLabel'>" + placeholder + "</div>");
				var label = input.parent().find(".placeholderLabel");
				
				if (input.val() == "") {
					label.show();
				}
				
				input.keyup(function() {
					label.toggle(input.val() == ""); // show label when input is empty
			
			// because browsers will often fill in a password when the user types an email
			// we need to also update the password field's label
			var passwordField = jQuery(input.parents("form").find("input[type='password']")[0]);
			var passwordLabel = passwordField.parent().find(".placeholderLabel");
			passwordLabel.toggle(passwordField.val() == "");
			});
				
				jQuery(".placeholderLabel").click(function() {
					var label = jQuery(this);
					label.parent().find("input").focus();
				});
				});
			}
			jQuery(document).ready(function() {
				var $ = jQuery;
			var RioTopNav = {};
			
			RioTopNav.updateItemCount = function(count) {
			var $countDisplay = $(".rioItemCountDisplay");
			if ($countDisplay.length == 0) {
			return;
			}
			if (count === 0 || count) {
			$countDisplay.find(".rioItemCountNumber").html(count);
			}
			if (count && count > 0) {
			$countDisplay.show();
			} else {
			$countDisplay.hide();
			}
			};
			
			RioTopNav.pollForItemCount = function() {
			$.ajax({
			url: "/dash/list/count",
			success: function (data){
				RioTopNav.updateItemCount(data);
			},
			complete : function() {
				RioTopNav.queuePollForItemCount()
			}
			});
			}
			
			RioTopNav.queuePollForItemCount = function() {
			if (!window.DashNotifications || !DashNotifications.enabled) {
			setTimeout(RioTopNav.pollForItemCount, 30000);
			}
			};
			
			if ($(".rioItemCountDisplay").length > 0) {
			RioTopNav.queuePollForItemCount();
			}
			window.RioTopNav = RioTopNav;
			if (window.DashNotifications && DashNotifications.enabled) {
			DashNotifications.addListener(function(eventName, eventData){
			if (eventName == "Rio.ListItem.ItemProcessed"
			|| eventName == "Rio.ListItem.ItemDeleted"
			|| eventName == "Rio.ListItem.ItemRestored") {
			RioTopNav.pollForItemCount();
			}
			});
			}
			});
		</script>
		<script language="javascript" type="text/javascript">
			Function.prototype.bind = Function.prototype.bind || function (thisp) {
			var fn = this;
			return function () {
			return fn.apply(thisp, arguments);
			};
			};
			function submitOnlyOnce(theForm){
			if (jQuery(window.parent.jQuery(".inCart")).length) {
			var asin = jQuery(theForm.asin).val();
			var quantity = jQuery(theForm.quantity).val();
			if (quantity == 0) {
			jQuery(window.parent.jQuery("." + asin + "-asin")).trigger("showPastPurchaseTag-" + asin);
			}
			}
			jQuery(jQuery(theForm).find("button[type=submit], input[type=image], input[type=submit], input[type=button]").attr("disabled", "disabled"));
			}
			function disableLink(theLink) {
			jQuery(theLink).click(function(e) { return false; });
			}
			function refreshShoppingCart() {
			jQuery("#shopping-cart").attr("src", "ShoppingCartView");
			}
			var cartEventListeners = [];
			function addCartEventListener(listener){
			cartEventListeners.push(listener);
			}
			function cartReloadEvent(cartInfo){
			for(index in cartEventListeners) {
			cartEventListeners[index](cartInfo);
			}
			}
			function truncateTitle(title) {
			var height = title.height();
			title.css("height", "auto");
			title.css("max-height", 200);
			title.css("overflow", "hidden");
			var anchor = title.find("a"),
			text = anchor.text();
			while (text.length > 0 && title.height() > height) {
			text = text.substr(0, text.length - 1);
			anchor.html(text + "&#8230");
			}
			title.css("max-height", "30px");
			}
			var warnOfInvalidItems = true;
			function updateAddAllToCartButton(event) {
			var validList = "";
			var invalidList = "";
			
			jQuery(".listItem").each(function(index) {
			var item = jQuery(this);
			var conflictInput = item.find("input[name='conflictWithSlot']");
			if (item.find(".itemUnavailableText").size() > 0 || item.find(".discontinued").size() > 0) {
			// Ignore unavailable and discontinued items
			} else if (conflictInput.size() == 0 || conflictInput.val() == "false") { // skip invalid items
			var quantity = item.find(".addToCart input[name='quantity']");
			
			if (quantity.size() > 0 && quantity.val() > 0) {
			var asin = item.attr("id");
			var merchantId = item.find(".addToCart input[name='merchantId']").val();
			validList += asin + "|" + quantity.val() + "|" + merchantId + ",";
			}
			} else {
			invalidList +="<li>" + item.find(".itemTitle a").html() + "</li>";
			}
			});
			jQuery(this).find("input[name='itemDetails']").val(validList);
			// show message if invalid items cannot be added
			if (warnOfInvalidItems && invalidList != "") {
			event.preventDefault();
			var message = "These items are not available for delivery <strong>" + jQuery("#headerNav #selectday a").html() + "</strong> and will NOT be added to your cart:<ul>";
						
						message += invalidList;
			message +="</ul>";
			message += "<button id='addAllAvailableItemsToCart'>Continue without These Items</button>&nbsp;&nbsp;";
			message += "<button class='nevermind'>Nevermind</button/>";
			
			showOnDemandLightboxWithContent(message, jQuery(this));
			
			jQuery("#addAllAvailableItemsToCart").click(function() {
			warnOfInvalidItems = false;
			jQuery("#addAllToCart").submit();
			hideLightbox();
			});
			}
			
			warnOfInvalidItems = true;
			}
			function showAddToCartLightbox(form, message) {
			showOnDemandLightboxWithContent(message, form, function() {
			var lightbox = jQuery("#lightbox");
			var atcButtons = lightbox.find("#addToCartButtons");
			var totalWidth;
			if (atcButtons.size() > 0) {
			totalWidth = atcButtons.find("form[name='UseSlotAndAddToCart']").width()
			+ atcButtons.find("form[name='ClearSlot']").width()
			+ atcButtons.find(".nevermind").width();
			} else {
			totalWidth = 400;
			}
			lightbox.width(Math.max(300, totalWidth + 110));
			lightbox.find(".itemTitle").width(lightbox.width() - 150);
			});
			}
			function setPostAddCookie(e) {
			document.cookie="freshPostSlotAdd=true;"
			return true;
			}
			function removePostAddCookie() {
			var cookie_date = new Date ();
			cookie_date.setTime ( cookie_date.getTime() - 1 );
			document.cookie = "freshPostSlotAdd=; expires=" + cookie_date.toGMTString();
			}
			function showLoadingSpinner(event){
			var spinnerTextList = new Array(
				"We're processing your order.",
				"More items can be added after your order is placed.",
				"Download our mobile apps to shop any time, anywhere.",
				"Discover local favorites on your city's Spotlight page.",
				"We offer a 100% grocery satisfaction guarantee.",
				"Get your shopping done fast with one-click recipes.",
				"Thank you for shopping on AmazonFresh.",
				"Easily find your favorites in Past Purchases.",
				"We look forward to serving you.",
				"Your order will arrive in temperature-controlled bags.",
				"Please leave your porch light on for our drivers.",
				"Save time by creating Your Lists.");
			
			/* Using a short timeout hack to ensure that we do not encounter freezing GIF problems in IE on form post -npprabhu */
			setTimeout(function() {
			var isInIframe = window.location != window.parent.location;
			var spinnyBlock;
			if (isInIframe) {
				spinnyBlock = jQuery("#orderProcessing", window.parent.document);
			} else {
				spinnyBlock = jQuery("#orderProcessing");
			}
			
			spinnyBlock.show();
			
			var spinnyText = spinnyBlock.find("#spinnerText");
			var txtCounter = 0;
			setInterval(function(){
				txtCounter++;
				spinnyText.html(spinnerTextList[txtCounter]);
				if(txtCounter == (spinnerTextList.length - 1)){
					txtCounter = -1;
				}
			}, 5000);
			
			var spinnyImage = spinnyBlock.find("#greenTruck");
			var imgCounter = 0;
			var imgPos = parseInt(spinnyImage.css("left"));
			setInterval(function(){
				imgCounter++;
				spinnyImage.css("left", imgPos + (200 * imgCounter));
				if(imgCounter == 2) {
					imgCounter = -1;
				}
			}, 1000);
			
			}, 50);
			}
			jQuery(document).ready(function() {
			handleDeliveryNotes();
			jQuery("#placeOrderForm, form[action='UpdateOrder']").submit(showLoadingSpinner);
			jQuery(".buying .variationRadio").live('click',changeVariationEventHandler);
			jQuery(".smallProduct .variationRadio ").live('click',changeVariationEventHandler);
			jQuery(".shovelerItem .variationRadio ").live('click',changeVariationEventHandler);
			jQuery(".mobileBody .variationRadio ").live('click',changeVariationMobileEventHandler);
			
			jQuery(document).ajaxError(function(event, request, settings, exception) {
			if (401 === request.status) {
			window.location.href = "/Authenticate?signInSuccessUrl=" + encodeURIComponent(location.pathname);
			return true;
			}
			return false;
			});
			});
			function handleDeliveryNotes() {
			jQuery("#editDeliveryInstructions").click(function() {
			var content = jQuery("#deliveryInstructionsLightboxWrapper");
			showOnDemandLightboxWithContent(content.html());
			attachCustomerDeliveryNotesClipHandler();
			});
			attachCustomerDeliveryNotesClipHandler();
			}
			//Limit customer delivery notes input to 255 characters, as we claim.
			function attachCustomerDeliveryNotesClipHandler() {
			var clipCustomerDeliveryNotes = function(event) {
			var textArea = jQuery('.customerDeliveryNotesInput');
			var textValue =  textArea.val();
			if (textValue.length > 255) {
			textValue = textValue.slice(0, 255);
			textArea.val(textValue);
			textArea.scrollTop(textArea[0].scrollHeight);
			}
			};
			jQuery('.customerDeliveryNotesInput').keydown(clipCustomerDeliveryNotes);
			jQuery('.customerDeliveryNotesInput').keyup(clipCustomerDeliveryNotes);
			jQuery('.customerDeliveryNotesInput').change(clipCustomerDeliveryNotes);
			}
			function changeVariationEventHandler(event) {
			if(event.isPropagationStopped()) return;
			event.stopPropagation();
			$this = jQuery(this);
			var asin_id = $this.attr("value");
			var asin = asin_id.split("_")[0];
			var showItemId = jQuery(this).parent(".variationSelection").parent().find(".var_".concat(asin_id));
			var showItem = jQuery(this).parent(".variationSelection").parent().find(".var_".concat(asin));
			jQuery(this).closest(".variationSelection").parent().find(".variation").hide();
			showItemId.show();
			showItem.show();
			}
			function changeVariationMobileEventHandler(event) {
			if(event.isPropagationStopped()) return;
			event.stopPropagation();
			$this = jQuery(this);
			var asin = jQuery(this).attr("value");
			var showItem = jQuery(this).parents(".variationSelection").parent().find(".var_".concat(asin));
			$this.closest(".variationSelection").parent().find(".variation").hide();
			showItem.show();
			}
		</script>
		<script language="javascript" type="text/javascript">
			jQuery(document).ready(function() {
			jQuery('#shopping-cart').load(function() {
			var iFrame = jQuery('#shopping-cart').contents();
			iFrame.find(".proceedToCheckout").click(function(event) {
			var showModal = 'false';
			if (showModal == "true") {
			event.preventDefault();
			showFeralUpsellModal();
			}
			});
			});
			});
			function showFeralUpsellModal() {
			jQuery.get("MembershipUpsell", function(data) {
			if (jQuery.trim(data).length > 0) {
			showOnDemandLightboxWithContent(data);
			jQuery("#lightbox").css("top", 45);
			jQuery("#lightbox").css("width", 890);
			jQuery("#lightbox").css("border-radius", 10);
			}
			});
			}
		</script>
		<script type="text/javascript">
			jQuery(function($) {
				function selectSuggestion(suggestion) {
				document.getElementById('predictiveSearchFlag').value = "true";
				jQuery('#freshSearchForm').submit();
				}
				
				var $autocomplete = $('#searchAutocomplete').autocomplete("SearchSuggestions", {
				delay:200,
				cacheLength:10,
				matchSubset:0,
				selectFirst:false,
				selectOnly:false
				}).result(function(event, selected, formatted) {
					//chrome's shinny html5 search box likes triggering this when the user
					//clicks the X to clear the text in the box
						if (selected != undefined && selected.length > 0) {
						selectSuggestion(selected);
						}
			});
				var $autofocus = $('input[autofocus]');
				
				// helper functions
				var isAlphaNumeric = function(code) {
				return (code >= 48 && code < 58) ||  //digits
				(code >= 65 && code < 91) ||   // uppercase
				(code >= 97 && code < 123);    //lowercase
				};
				var isInput = function(target) {
				return ('INPUT' === target.tagName)
				|| ('TEXTAREA' === target.tagName)
				|| ('SELECT' === target.tagName)
				|| ('true' === target.contentEditable);
				};
				
				var isMeta = function(e) {
					return e.altKey || e.ctrlKey || e.metaKey;
				};
				var searchSpaceAvailable = function() {
				var $stripeMenu = $("#stripeMenu");
				if (!$stripeMenu.size()) {
				return 0;
				}
				var $cartInfo = $("#cartInfo");
				if ($cartInfo.size()) {
				return $cartInfo.offset().left - ($stripeMenu.offset().left + $stripeMenu.width());
				} else {
				return $("topNav").width() - ($stripeMenu.position().left + $stripeMenu.width());
				}
				};
				
			// instrument keydown mapping
				$(document).keydown(function(e) {
				if (!isInput(e.target) && isAlphaNumeric(e.which) && !isMeta(e)) {
				$autocomplete.focus();
				}
				});
				if (!("autofocus" in document.createElement("input"))) {
					// HTML5 autofocus is not natively supported
				$('input:text').each(function() {
					if (this.getAttribute('autofocus') != null) {
						this.focus();
					}
				});
				}
			});
		</script>
		<script language="javascript" type="text/javascript">
			jQuery(function($) {
			$(".rateThis").click(function(event) {
			event.preventDefault();
			
			var createReview = $(event.target).parent().children("form[name='createReview']");
			createReview.submit();
			});
			});
			var yodaHoverStars = {
			"0.0": "0-stars._V348723593",
			"0.5": "0.5-star-green._V348723588",
			"1.0": "1-star-green-hover._V348723589",
			"1.5": "1.5-star-green._V348723595",
			"2.0": "2-star-green-hover._V348723595",
			"2.5": "2.5-star-green._V348723593",
			"3.0": "3-star-green-hover._V348723594",
			"3.5": "3.5-star-green._V349257526",
			"4.0": "4-star-green-hover._V348723595",
			"4.5": "4.5-star-green._V348723592",
			"5.0": "5-star-green-hover._V348723594"
			};
			var yodaStars = {
			"0.0": "0-stars._V348723593",
			"0.5": "0.5-star-green._V348723588",
			"1.0": "1-star-green._V349257527",
			"1.5": "1.5-star-green._V348723595",
			"2.0": "2-star-green._V348723595",
			"2.5": "2.5-star-green._V348723593",
			"3.0": "3-star-green._V349257521",
			"3.5": "3.5-star-green._V349257526",
			"4.0": "4-star-green._V348723585",
			"4.5": "4.5-star-green._V348723592",
			"5.0": "5-star-green._V348723593"
			};
			function swapStars(numstars, imageID, color){
			var image = document.getElementById(imageID);
			var path = getNewCustRatingPath(image,imageID);
			if(color == "yellow") {
			var numstarPath = numstars.split(".").join("-");
			if(numstarPath == "0-0") {
			path += "stars-";
			numstarPath += "-transparent";
			}
			else {
			path += "ratings/stars-"
			}
			image.setAttribute('src', path + numstarPath + '._V25749327_.gif');
			image.setAttribute('width', '55');
			} else {
			
			var custRatingUrlElem = jQuery('#currentCustUrl');
			var custRatingUrl = custRatingUrlElem.html();
			image.setAttribute('src',custRatingUrl);
			image.setAttribute('width', '55');
			}
			}
			function swapYodaStars(numstars, imageID, color) {
			var image = jQuery('#' + imageID);
			if (color == "yellow") {
			var path = "https://images-na.ssl-images-amazon.com/images/G/01/omaha/images/ui/search/";
			var splice = "0-stars._V348723593";
			var end = "_.png";
			splice = yodaHoverStars[numstars];
			image.attr('src', path + splice + end);
			image.attr('width', '70');
			} else {
			var custRatingUrlElem = jQuery('#currentCustUrl');
			var custRatingUrl = custRatingUrlElem.html();
			image.attr('src',custRatingUrl);
			image.attr('width', '70');
			}
			}
			function returnGreenStars(imageID){
			var image = document.getElementById(imageID);
			var currAvg = document.getElementById('currentAvg');
			var numstars = currAvg.textContent;
			var oldUrl =  image.getAttribute('src');
			var path = "https://images-na.ssl-images-amazon.com/images/G/01/omaha/images/img_";
			var splice = "zero";
			var end = "_star.gif";
			if(numstars == 0.0)  { splice = "zero";
			} else if (numstars == 0.5) { splice = "zero_half";
			} else if (numstars == 1.0) { splice = "one";
			} else if (numstars == 1.5) { splice = "one_half";
			} else if (numstars == 2.0) { splice = "two";
			} else if (numstars == 2.5) { splice = "two_half";
			} else if (numstars == 3.0) { splice = "three";
			} else if (numstars == 3.5) { splice = "three_half";
			} else if (numstars == 4.0) { splice = "four";
			} else if (numstars == 4.5) { splice = "four_half";
			} else if (numstars == 5.0) { splice = "five"; }
			
			image.setAttribute('src', path + splice + end);
			image.setAttribute('width', '55');
			}
			function returnYodaGreenStars(imageID) {
			var image = jQuery('#' + imageID);
			var currAvg = image.parent().siblings('.currentAvg');
			var numstars = jQuery.trim(jQuery(currAvg).html());
			var path = "https://images-na.ssl-images-amazon.com/images/G/01/omaha/images/ui/search/";
			var splice = "0-stars._V348723593";
			var end = "_.png";
			splice = yodaStars[numstars];
			image.attr('src', path + splice + end);
			image.attr('width', '70');
			}
			function calculateAvgFromUrl(oldUrl){
			var pieces = oldUrl.split("_");
			var first = pieces[1];
			var num = 0.0;
			if(first == 'zero'){ num = 0.0;
			}else if(first == 'one'){ num = 1.0;
			}else if(first == 'two'){ num = 2.0;
			}else if(first == 'three'){ num = 3.0;
			}else if(first == 'four'){ num = 4.0;
			}else if(first == 'five'){ num = 5.0;}
			if(pieces.length > 3){ num = num + 0.5;}
			return num;
			}
			function onClick(rating,asin,name,isSecure){
			jQuery.get(
			"RatingRequest?asin=" + asin + "&rating=" + rating + "&secure=" + isSecure,
			function(ajax) {
			if(name == 'CustReviews') {
			setupPage(ajax, name, rating);
			setupPage(ajax, '2MoonNBack', rating);
			} else if (name == '2MoonNBack') {
			setupPage(ajax, name, rating);
			if (jQuery('ratingMessageAll' + 'CustReviews').length) {
			setupPage(ajax, 'CustReviews', rating);
			if (jQuery("#yodaStyleFlag").length) {
			returnYodaGreenStars('CustReviews')
			} else {
			returnGreenStars('CustReviews');
			}
			}
			} else {
			setupPage(ajax, name, rating);
			}
			}
			);
			}
			function setupPage(ajax,name, rating) {
			var splitResponse = jQuery.trim(ajax).split("\n");
			var newAvgRating = rating;
			var newCustRatingUrl = splitResponse[2];
			var newRatingMessageAll = splitResponse[3];
			var newNumRated = splitResponse[4];
			var newRatingMessageDetail = splitResponse[5];
			if(jQuery('#currentCustUrl').length){
			var custUrl = jQuery('#currentCustUrl')[0];
			custUrl.textContent=newCustRatingUrl;
			custUrl.innerText=newCustRatingUrl;
			swapStars('0.0', name, 'original');
			}
			var image = document.getElementById(name);
			var currAvg = jQuery(image).parent().siblings('.currentAvg');
			jQuery(currAvg).html(newAvgRating);
			jQuery('#ratingMessageAll' + name).html(newRatingMessageAll);
			
			var numRateField = jQuery('#numRated' + name);
			if (numRateField.find('a').size() > 0) {
			numRateField.find('a').html("("+newNumRated+")");
			} else {
			numRateField.html("("+newNumRated+")");
			}
			jQuery('#ratingMessageDetail' + name).html(newRatingMessageDetail);
			
			if(jQuery('hasBeenRated').length){
			var rated = jQuery('hasBeenRated')[0];
			rated.textContent = 'yes';
			rated.innerText = 'yes';
			}
			
			var custImage = jQuery("#custRating"+name + " img");
			if(custImage.length && checkValidForCustRating(name)){
			var finalUrl = getNewCustUrlFromUrl(newCustRatingUrl, custImage, name);
			custImage.attr('src', finalUrl);
			if (jQuery("#yodaStyleFlag").length) {
			custImage.attr('width', '55');
			} else {
			custImage.attr('width', '70');
			}
			}
			if (jQuery("#yodaStyleFlag").length) {
			returnYodaGreenStars(name)
			} else {
			returnGreenStars(name);
			}
			}
			function checkValidForCustRating(word){
			var name = word.toLocaleLowerCase();
			if(name.indexOf('merchandising') == -1 && name.indexOf('sims') == -1 && name.indexOf('search')  == -1 &&  name.indexOf('special') == -1){
			return true;
			} else {
			return false;
			}
			}
			function getNewCustUrlFromUrl(url, image, imageID){
			var urlArr = url.split('/');
			var oldUrl =  image.attr('src');
			var isYodaStyle = (jQuery("#yodaStyleFlag").length > 0) && (jQuery("#yodaStyleFlag").val() === 'true');
			if(!isYodaStyle) {
			var path = "https://images-na.ssl-images-amazon.com/images/G/01/x-locale/common/customer-reviews/ratings/";
			} else {
			var path = "https://images-na.ssl-images-amazon.com/images/G/01/omaha/images/ui/search/";
			}
			var finalUrl = path + urlArr[urlArr.length - 1];
			return finalUrl;
			}
			function getNewCustRatingPath(image, imageID){
			var oldUrl =  image.getAttribute('src');
			var currName = document.getElementById('currName');
			if(currName.textContent != imageID){
			currName.textContent = imageID;
			currName.innerText = imageID;
			var oldAvg = calculateAvgFromUrl(oldUrl);
			var avgRating = document.getElementById('currentAvg');
			if (jQuery("#yodaStyleFlag").length == 0) {
			avgRating.textContent = oldAvg;
			avgRating.innerText = oldAvg;
			}
			}
			
			var path = "https://images-na.ssl-images-amazon.com/images/G/01/x-locale/common/customer-reviews/";
			return path;
			}
		</script>
		<script language="javascript" type="text/javascript">
			var RequiredFields = "";
			var StarRating = "";
			function ValidateRequiredFields(asin)
			{
			fieldNamesElem = jQuery('#fieldNames');
			starRatingElem = jQuery('#currentCustUrl');
			if(fieldNamesElem.length > 0) {
			var fieldNames = fieldNamesElem.html();
			RequiredFields = fieldNames;
			}
			if(starRatingElem.length > 0) {
			StarRating = starRatingElem.html();
			}
			var FieldList = RequiredFields.split(",");
			
			var BadList = new Array();
			
			for(var i = 0; i < FieldList.length; i++) {
			var s = jQuery('#' + FieldList[i]).val();
			s = StripSpacesFromEnds(s);
			if(s.length < 1) { BadList.push(FieldList[i]); }
			}
			
			if(BadList.length < 1 && hasBeenRated(StarRating)) { return true; }
			var messageDiv = jQuery('#messaging');
			if(!jQuery('#error').length){
			var errorDiv = document.getElementById('warning');
			if (!errorDiv)
			errorDiv = document.createElement('div');
			errorDiv.setAttribute('class', 'warning');
			errorDiv.setAttribute('id', 'warning');
			errorDiv.textContent = "You have not completed the fields below.  Please fill in these fields or you can ";
			errorDiv.innerText = "You have not completed the fields below.  Please fill in these fields or you can ";
			var exit = document.createElement('a');
			exit.href = 'product?asin=' + asin;
			exit.innerText='exit the review process.';
			exit.textContent='exit the review process.';
			errorDiv.appendChild(exit);
			messageDiv.append(errorDiv);
			} /*else {
			var errorDiv = document.getElementById('warning');
			if (errorDiv)
			errorDiv.parentNode.removeChild(errorDiv);
			}*/
			return false;
			}
			function StripSpacesFromEnds(s)
			{
			while((s.indexOf(' ',0) == 0) && (s.length> 1)) {
			s = s.substring(1,s.length);
			}
			while((s.lastIndexOf(' ') == (s.length - 1)) && (s.length> 1)) {
			s = s.substring(0,(s.length - 1));
			}
			if((s.indexOf(' ',0) == 0) && (s.length == 1)) { s = ''; }
			return s;
			}
			function hasBeenRated(url){
			if(url != "https://images-na.ssl-images-amazon.com/images/G/01/x-locale/common/customer-reviews/stars-0-0-transparent._V18709861_.gif") {
			return true;
			}
			return false;
			}
		</script>
		<script><!--
			jQuery(document).ready(function() {
				bindActionsToListPopover();
				
			});
			function bindActionsToListPopover() {
			jQuery('div.secondaryActions div.saveToListAction a').live('click', getListPopover);
			jQuery('#pastPurchases div.densePPItem img.menuTriangle').live('click', getListPopover);
			}
			function displayListPopover(form) {
				var asin = form.children("input[name='asin']").attr("value");
			var available = form.children("input[name='available']").attr("value");
			var inStock = (available == null) || (available == "true");
				jQuery.get(
			"displayListsToAdd?asin=" + asin + "&referer=" + "%2Fproduct%3Freferer%3D%26asin%3DB019ZOS0TO",
			function(ajax) {
			jQuery("#alphaLayer").addClass("disablePage");
			var wrapper = jQuery("<div></div>").addClass("listPopoverWrapper");
			var infoBox = jQuery("<div></div>").attr("id", "infoBox").append(ajax).css("top", jQuery(window).scrollTop() + "px");
			wrapper.append(infoBox);
			jQuery("body").append(wrapper);
			if(!inStock) {
			jQuery("#infoBox_nextDelivery").addClass("disabled");
			jQuery("input[name='addToOpenOrder']").attr("disabled", "disabled").removeAttr("checked");
			}
			jQuery("#infoBox_close .closeWindow a").click(closePopover);
			jQuery("#addListItemForm input[type='submit']").click(saveList);
			}
			);
			}
			function getListPopover(event) {
				event.preventDefault();
			var form = jQuery(event.target).parents('form');
			displayListPopover(form);
			}
			function closePopover(event) {
							if(null != event) {	event.preventDefault(); }
				jQuery(".listPopoverWrapper").remove();
				jQuery("#alphaLayer").removeClass("disablePage");
			}
			function saveList(event) {
				event.preventDefault();
			var asin = jQuery("#infoBox_box input[name='addToListAsin']").attr("value");
			var listId = 0;
			listId = jQuery("#addListItemForm input:checked").val();
			var refId = jQuery("input[name='refId']").val();
			jQuery("#addListItemForm input[type='submit']").attr("disabled", "disabled");
			if(listId != -1) {
				var name = jQuery("#listName"+listId).val();
			jQuery.get(
			"AddListItem",
			{asin:asin,
			id:listId,
			refId:refId,
			name:name},
				function(ajax) {
				saveListSuccess(asin, ajax);
			}
			);
			} else {
			var name = jQuery("#addListItemForm input[name='name']").attr("value");
			jQuery.post(
				"CreateNewList?asin="+asin+"&name="+name+"&reload=false",
			function(ajax) {
					saveListSuccess(asin, ajax);
			}
			);
			}
			}
			function saveListSuccess(asin, ajax) {
					jQuery("div.listPopoverWrapper").remove();
					jQuery("#alphaLayer").removeClass("disablePage");
					var updatedMsg = jQuery("<div></div>").attr("id", "updatedMsg").addClass("savedToList").append(ajax);
					var listId = jQuery(updatedMsg).find("span.listId").text();
					var saveDiv = jQuery("#saveToList"+asin);
					saveDiv.parent().append(updatedMsg);
					var tag = jQuery("#numitems-" + listId);
					var numItems = parseInt(tag.text().substring(1));
					numItems++;
					tag.empty();
					tag.append("(" + numItems + " items)");
					truncateListTitle(updatedMsg);
			}
			function truncateListTitle(targetDiv) {
			var targetLink = targetDiv.find('a');
			var text = targetLink.html();
			var targetHeight = targetDiv.height();
			while (text.length > 0 && targetDiv.attr("scrollHeight") > 25) {
			text = text.substr(0, text.length - 1);
			targetLink.html(text + "...");
			}
			}
			function closeWindowHover() {
			jQuery(this).find('.closeInfoBox').toggle();
			jQuery(this).find('.closeInfoBoxHidden').toggle();
			}
		--></script>
		<script language="javascript" type="text/javascript">
			jQuery(document).ready(function() {
			
				jQuery('#couponTermsAndConditionsLink').click(function() {
					showPreloadedLightboxWithId("couponTermsAndConditions");
					return false;
				});
				
			jQuery('.couponButtonForm').click(function() {
				clipCouponAjax(jQuery(this));
			return false;
			});
			
			truncateTitles("div.couponUnclippable div.couponBottom div.couponTitle");
			truncateTitles("div.couponClippable div.couponTop div.couponTitle");
			jQuery("a[href*='/CouponSearch']").each(function() {
				
				var resultSpaceWidthForCouponSearch = jQuery(window).width() - 300 -185;
				var couponWidth = 215;
				var couponResultsPerRow = Math.floor(resultSpaceWidthForCouponSearch / couponWidth);
				
				var couponResultCount = couponResultsPerRow * 8;
				var link = jQuery(this);
			var isFirstParam = link.attr("href").indexOf("?") < 0;
			link.attr("href", link.attr("href") + (isFirstParam ? "?" : "&") + "resultsPerPage=" + couponResultCount);
			});
			});
			function truncateTitles(divSelector) {
			var titles = jQuery(divSelector);
			titles.each(function(index) {
			truncateTitle(jQuery(titles[index]));
			jQuery(titles[index]).css("min-height",28);
			});
			return false;
			}
			function clipCouponAjax(form) {
			var couponId = form.find("input[name='couponId']").val();
			var location = form.find("input[name='locationTag']").val();
			var clipButton = form.find(":submit");
			var ajaxAttrs = {"couponId": couponId, "location": location};
			
			jQuery.ajax({
			type: "post",
			url: "couponClip?",
			data: ajaxAttrs,
			success: function(data, text) {
				var response = jQuery.trim(data);
				if (response == "true") {
			setClipButtonClipped(clipButton);
			refreshShoppingCart();
				} else {
				setClipButtonError(clipButton);
			}
			},
			error: function(request, status, error) {
			setClipButtonError(clipButton);
			}
			});
			
			return false;
			}
			function setClipButtonClipped(button) {
				button.attr("class", 'clipButtonClipped');
				button.attr("disabled", "disabled");
			button.attr("value", 'Coupon Clipped');
			button.attr("title", "Coupon Clipped");
			}
			function setClipButtonError(button) {
				button.attr("class", 'clipButtonError');
			button.attr("disabled", "disabled");
			button.attr("value", 'Clip Error');
			button.attr("title", "Error encountered clipping coupon");
			}
		</script>
		<link href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/refresh._V1432677347_.css" type="text/css" rel="stylesheet" />
		<script type="text/javascript" src="https://images-na.ssl-images-amazon.com/images/G/01/omaha/js/lightbox._V1396384790_.js"></script>
		<script type="text/javascript" src="https://images-na.ssl-images-amazon.com/images/G/01/omaha/js/refreshToolbar._V1376527512_.js"></script>
		<link rel="stylesheet" type="text/css" href="/css/MyFontsWebfontsKit.css" />
		<link rel="shortcut icon" href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/images/ui/favicon.ico" type="image/vnd.microsoft.icon"/>
		<link rel="icon" href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/images/ui/favicon.ico" type="image/vnd.microsoft.icon"/>
		<script language="javascript" type="text/javascript">
			var FormName = "";
			var RequiredFields = "";
			window.onload = function(){
			fieldNamesElem = jQuery('#fieldNames');
			formNameElem = jQuery('#formName');
			if(fieldNamesElem.length > 0 && formNameElem.length > 0) {
			var fieldNames = fieldNamesElem.html()
			var formName = formNameElem.html();
			
			RequiredFields = fieldNames;
			FormName = formName;
			}
			}
			function StripSpacesFromEnds(s)
			{
			while((s.indexOf(' ',0) == 0) && (s.length> 1)) {
			s = s.substring(1,s.length);
			}
			while((s.lastIndexOf(' ') == (s.length - 1)) && (s.length> 1)) {
			s = s.substring(0,(s.length - 1));
			}
			if((s.indexOf(' ',0) == 0) && (s.length == 1)) { s = ''; }
			return s;
			}
		</script>
		<script type="text/javascript" src="https://images-na.ssl-images-amazon.com/images/G/01/media/swf/amznjq-swfobject-2.2._V210753426_.js"></script>
		<script type="text/javascript">
			var magnifier = null;
			var lockedImage= null;
			var border = null;
			var registeredImages = [],
				registeredVideos = [],
				selectedImageId,
				players = [];
			var engaged = false;
			var lens=null;
			var videoIndex = null;
			var videoUrl = null;
			var versionNumber = null;
			var isAiryEnabled = null;
			jQuery(document).ready(function() {
				var mainImage = jQuery("#mainImg");
							var staticImages = {	"zoomOut":"https://images-na.ssl-images-amazon.com/images/G/01/detail-page/cursors/zoom-out._V184888738_.bmp",
										"zoomEscOpaque":"https://images-na.ssl-images-amazon.com/images/G/01/apparel/rcxgs/exit_fullscreen_opaque._V192207183_.gif",
										"zoomIn":"https://images-na.ssl-images-amazon.com/images/G/01/detail-page/cursors/zoom-in._V184888790_.bmp",
										"zoomLensBackground":"https://images-na.ssl-images-amazon.com/images/G/01/apparel/rcxgs/tile._V211431200_.gif",
										"videoThumbIcon":"https://images-na.ssl-images-amazon.com/images/G/01/Quarterdeck/en_US/images/video._V183716339_.gif",
										"spinner":"https://images-na.ssl-images-amazon.com/images/G/01/ui/loadIndicators/loading-large_labeled._V192238949_.gif",
										"videoSWFPath":"https://images-na.ssl-images-amazon.com/images/G/01/Quarterdeck/en_US/video/20110518115040892/Video._V178668404_.swf",
										"zoomEscTransparent":"https://images-na.ssl-images-amazon.com/images/G/01/apparel/rcxgs/exit_fullscreen._V156423168_.png",
										"arrow":"https://images-na.ssl-images-amazon.com/images/G/01/javascripts/lib/popover/images/light/sprite-vertical-popover-arrow._V186877868_.png"
									};
			magnifier = mainImage.amazonMagnifier({
			location:"right",
			adjustment:[0,0,1,1],
			preload:"ready",
			zIndex: 15,
			minHeightElement: "#detailPageImages",
			generalImageUrls: staticImages,
			detailImageUrl: jQuery(jQuery("#detailPageImages input[name='hiResImgUrl']")[0]).val(),
			adjustment: [20, 0, 0, 0]
			});
			registerImagesAndVideos();
			jQuery("#detailPageImages img.thumbnail").mouseenter(loadProductImage);
			jQuery("#detailPageImages img.thumbnail").click(lockImage);
			changeMagnifierImageSet();
			
			setupTrialSizePromo();
			});
			function registerImagesAndVideos() {
				var thumbnails = jQuery("#detailPageImages .detailPageThumbnail");
				for (var i=0; i < thumbnails.length; i++) {
					var thumbnail = jQuery(thumbnails[i]);
					if (thumbnail.hasClass("videoThumbnail")) {
						var mediaId = jQuery(thumbnail.find("input[name='mediaId']")).val();
						registeredImages[i] = new Object();
					registeredImages[i].image = jQuery(thumbnail.find("input[name='detailImgUrl']")).val();
						registerVideo(i, mediaId);
					}
				}
			}
			function registerVideo( id, mediaID ) {
				if(!registeredVideos[id]) {
				registeredVideos[id] = new Object();
			}
			videoExists = true;
			registeredVideos[id].videoID = mediaID;
			var holderID = 'holder' + mediaID;
			
				var holderStr = "<div class='videoPlaceHolder' onclick='event.stopPropagation();' style='position:absolute' id='holder"+mediaID+"'></div>";
				var placeHolder = jQuery(holderStr);
				
				jQuery('#detailPageImages #mainImgWrapper').append(placeHolder);
				var mediaObject = { mediaObjectId:mediaID, slateImageUrl:registeredImages[id].image };
				window.players[id] = new AmznVideoPlayer(mediaObject, holderID, 300, 300);
				
			}
			var changeMagnifierImageSet = function() {
			if (!magnifier)
			return;
			
			var images = {thumbnails:[],zoomImages:[],mainImages:[]},
				detailPageImgs = jQuery("#detailPageImages");
			images.thumbnails = detailPageImgs.find("img.thumbnail").attr("src");
			images.zoomImages = detailPageImgs.find("input[name='hiResImgUrl']").val();
			images.mainImages = detailPageImgs.find("input[name='detailImgUrl']").val();
			magnifier.changeImageSet(images);
			};
			var boundingRectangle=function(set){
				var b={left:Infinity,top:Infinity,right:-Infinity,bottom:-Infinity};
				jQuery(set).filter(":visible").each(function(){
					var t=jQuery(this);
					var o=t.offset();
					var w=t.outerWidth();
					var h=t.outerHeight();
					if(o.left<b.left){
						b.left=o.left;
					}
					if(o.top<b.top){
						b.top=o.top;
					}
					if(o.left+w>b.right){
						b.right=o.left+w;
					}
					if(o.top+h>b.bottom){
						b.bottom=o.top+h;
					}
				});
				return b;
			};
			jQuery.fn.amazonMagnifier=function(options){
				var FULL_SCREEN_MOVE_FACTOR=4;
				var FULL_SCREEN_PAGE_MARGIN=13;
				var ZOOM_ESC_WIDTH=422;
				var ZOOM_ESC_HEIGHT=51;
				var WINDOW_WIDTH_OFFSET=(jQuery.browser.safari?(parseInt(jQuery.browser.version)<526?15:20):0);
				var navImage=this;
				options=options||{};
				options.locationElement=options.locationElement||navImage;
				var zoomWindow=null;
				var cursorAt=null;
				var navImageRect=null;
				var preloaded={"null":1};
				var inFullPageZoom=false;
				var unavailableWasShown=false;
				var images;
				var altImageIndex=0;
				var allSelects;
				var zoomSelects;
				var magnifierSuppressed=false;
				var stretchyGoodnessSize=0;
					var generalImageUrls={zoomLensBackground:"https://images-na.ssl-images-amazon.com/images/G/01/apparel/rcxgs/tile._V211431200_.gif",zoomEscOpaque:"https://images-na.ssl-images-amazon.com/images/G/01/apparel/rcxgs/exit_fullscreen_opaque._V230173939_.gif",zoomEscTransparent:"https://images-na.ssl-images-amazon.com/images/G/01/apparel/rcxgs/exit_fullscreen._V230171951_.png"};
				jQuery.extend(generalImageUrls,options.generalImageUrls);
				var lensBackgroundUrl=generalImageUrls.zoomLensBackground;
				var zoomEscView=generalImageUrls.zoomEscTransparent;
				var currentDetailImageUrl=options.detailImageUrl||navImage.attr("rel");
				var parseMediaServerCodes=function(url){var m=url.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);
				var codes={};
				return codes;
			};
			var Lens=function(clickable){
				var size=[0,0];
				this.updateOffset=function(){
					this.offset=navImage.offsetParent().offset();
				};
				this.updateOffset();
				this.updateSize=function(width,height){
					jq.css({width:width,height:height});
					size=[width,height];
				};
				this.updatePosition=function(){
			var rpos=[cursorAt[0]-this.offset.left, cursorAt[1]-this.offset.top];
			var x=rpos[0]<(size[0]/2)?0:(rpos[0]>=navImageRect[2]-size[0]/2?navImageRect[2]-size[0]:rpos[0]-size[0]/2);
			var y=rpos[1]<(size[1]/2)?0:(rpos[1]>=navImageRect[3]-size[1]/2?navImageRect[3]-size[1]:rpos[1]-size[1]/2);
			var u=x/navImageRect[2];
			var v=y/navImageRect[3];
			x+=navImageRect[0];
			y+=navImageRect[1];
					jq.get(0).style.left=x+"px";
					jq.get(0).style.top=y+"px";
					return[u,v];
				};
				this.destroy=function(){
					jq.remove();
				};
				var zoomRatioH=(zoomWindow.detailSize&&zoomWindow.virtualSize[0]||500000000)/navImageRect[2];
				var zoomRatioV=(zoomWindow.detailSize&&zoomWindow.virtualSize[1]||500000000)/navImageRect[3];
				var jq=jQuery("<div id='magnifierLens' />").css({backgroundImage:"url("+lensBackgroundUrl+")",position:"absolute",cursor:"pointer"});
						this.appendLens=function(){
							this.updateSize(Math.min(navImage.width(),zoomWindow.rect.width/zoomRatioH),Math.min(navImage.height(),zoomWindow.rect.height/zoomRatioV));
							this.updatePosition();
							jq.appendTo(navImage.parent());
						}
							var self=this;
							if(!zoomWindow.detailImage.attr("complete")){
								zoomWindow.detailImage.load(function(){
									var zoomRatioH=zoomWindow.virtualSize[0]/navImageRect[2];
									var zoomRatioV=zoomWindow.virtualSize[1]/navImageRect[3];
									self.updateSize(Math.min(navImage.width(),zoomWindow.rect.width/zoomRatioH),Math.min(navImage.height(),zoomWindow.rect.height/zoomRatioV));
									self.updatePosition();
								});
							}};
							Lens.preload=function(){
								preload(lensBackgroundUrl);
							};
							var ZoomWindow=function(){
								var adjustment=options.adjustment||[0,0,0,0];
						var margin=[0,0];
						var virtualSize=[0, 0];
								var self=this;
								var fit=function(){
									var rect=null;
									if(options.location=="over"){
										rect=boundingRectangle(options.locationElement);
									}else{
										if(options.location=="right"){
											var o=navImage.offset(),
												contentColumn = jQuery("div#contentColumn, div#pageContent"),
											cartDiv = jQuery("div#inlineCartColumn, div#shoppingCart"),
											zoomWidth = cartDiv.offset().left - contentColumn.offset().left - navImage.outerWidth();
											rect={left:o.left+navImage.outerWidth(),top:o.top,right:o.left+navImage.outerWidth()+zoomWidth,bottom:o.top+400};
										}
									}
									if(options.minHeightElement){
										rect.bottom=Math.max(rect.bottom,rect.top+jQuery(options.minHeightElement).outerHeight());
									}
									rect.left+=adjustment[0];
									rect.top+=adjustment[1];
									rect.right+=adjustment[2];
									rect.bottom+=adjustment[3];
									rect.width=rect.right-rect.left;
									rect.height=rect.bottom-rect.top;
									cropWindow.css({left:rect.left,top:rect.top,width:rect.width,height:rect.height});
									self.rect=rect;
									return self;
								};
								var updateDetailSize=function(img){
									var imageObj=new Image();
									imageObj.src=img.attr("src");
									if(imageObj.width > 0 && imageObj.height > 0){
										self.detailSize=[imageObj.width,imageObj.height];
										return;
									}else{
										if(options.detailImageSize){
											self.detailSize=options.detailImageSize;
											return;
										}
									}
									var codes=parseMediaServerCodes(imageObj.src);
									var aspectRatio=navImageRect[2]/navImageRect[3];
									if(codes["SS"]||codes["AA"]){
										var size=codes["SS"]||codes["AA"];
										self.detailSize=[size,size];
									}else{
										if(codes["SX"]){
											self.detailSize=[codes["SX"],Math.round(codes["SX"]/aspectRatio)];
										}else{
											if(codes["SY"]){
												self.detailSize=[Math.round(codes["SY"]*aspectRatio),codes["SY"]];
											}else{
												if(codes["SL"]){
													if(aspectRatio>=1){
														self.detailSize=[codes["SL"],Math.round(codes["SL"]/aspectRatio)];
													}else{
														self.detailSize=[Math.round(codes["SL"]*aspectRatio),codes["SL"]];
													}
												}else{
													self.detailSize=[0,0];
													imageObj.onload=function(){
														self.detailSize=[imageObj.width,imageObj.height];
														updateDetailPosition();
														jQuery(window).resize();
													};
												}
											}
										}
									}
								};
						this.updateDetailMargin=function(){
						var mainWHRatio = navImageRect[2]/navImageRect[3];
						var detailWHRatio = self.detailSize[0]/self.detailSize[1];
						if (detailWHRatio > mainWHRatio) {
						margin = self.detailSize[0]/mainWHRatio-self.detailSize[1];
						self.margin=[0, margin/2];
						self.virtualSize=[self.detailSize[0], self.detailSize[1]+margin];
						} else {
						margin = self.detailSize[1]*mainWHRatio-self.detailSize[0];
						self.margin=[margin/2, 0];
						self.virtualSize=[self.detailSize[0]+margin, self.detailSize[1]];
						}
						};
								this.refit=function(){
									fit();
									updateDetailSize(this.detailImage);
									return this;
								};
								this.show=function(){
									cropWindow.show();
									return this;
								};
								this.hide=function(){
									cropWindow.hide();
									return this;
								};
								this.destroy=function(){
									cropWindow.remove();
									return this;
								};
								var cropWindow=jQuery("<div />").css({overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:options.zIndex||50});
											var url=navImage.attr("rel")||currentDetailImageUrl||options.detailImageUrl;
											this.detailImage=jQuery("<img id='detailImg' src='"+url+"'>").css({position:"absolute"});
											this.detailImage.load(loadSuccess);
											this.detailImage.error(loadFail);
											
											cropWindow.append(this.detailImage);
											cropWindow.appendTo(document.body);
											jQuery(document).trigger("updated.magnifier");
											this.updateImage=function(src){
												var img=jQuery("<img id='detailImg' src='"+src+"'/>").css("position","absolute");
												img.load(loadSuccess);
												img.error(loadFail);
												this.detailImage.remove();
												cropWindow.append(img);
												jQuery(document).trigger("updated.magnifier");
												this.detailImage=img;
											};
										};
										var loadSuccess = function() {
									if (engaged) {
											zoomWindow.refit().show();
									finalizeEngage();
									}
										};
										var loadFail = function() {
										};
										
										var updateDetailPosition=function(){
											if(lens){
												var pos=lens.updatePosition();
												if(zoomWindow.detailSize){
													zoomWindow.detailImage.get(0).style.left=-(pos[0]*zoomWindow.virtualSize[0]-zoomWindow.margin[0])+"px";
													zoomWindow.detailImage.get(0).style.top=-(pos[1]*zoomWindow.virtualSize[1]-zoomWindow.margin[1])+"px";
												}
											}
										};
										var onMouseMove=function(e){
											cursorAt=[e.pageX,e.pageY];
										var offset=lens?lens.offset:navImage.offsetParent().offset();
											if(e.pageX<navImageRect[0]+offset.left||e.pageY<navImageRect[1]+offset.top||e.pageX>=navImageRect[0]+navImageRect[2]+offset.left||e.pageY>=navImageRect[1]+navImageRect[3]+offset.top){
															disengage();
														}
														updateDetailPosition();
													};
													var setupOnMouseMove=function(){
														navImageRect=[navImage.position().left,navImage.position().top,navImage.width(),navImage.height()];
														navImage.unbind("mousemove",engage);
														jQuery(document).bind("mousemove.magnifier",onMouseMove);
													};
													var disengage=function(){
														if(!engaged){
															return;
														}
														if(zoomWindow){
															zoomWindow.hide();
														}
														if(lens){
															lens.destroy();
															lens=null;
														}
														if(!currentDetailImageUrl&&options.zoomUnavailableElement&&!unavailableWasShown){
															jQuery(options.zoomUnavailableElement).hide();
														}
														jQuery(document).unbind("mousemove.magnifier");
														navImage.bind("mousemove",engage);
														showSelects();
														engaged=false;
														jQuery(document).trigger("disengaged.magnifier");
													};
													var engage=function(e){
														if(engaged||magnifierSuppressed){
															return;
														}
														
														if(currentDetailImageUrl&&(!jQuery.browser.msie||jQuery.isReady)){
															hideSelects();
															setupOnMouseMove();
															cursorAt=[e.pageX,e.pageY];
															engaged=true;
															if(zoomWindow){
													if(zoomWindow.detailImage.attr("complete")) {
												finalizeEngage();
												}
															}else{
																zoomWindow=new ZoomWindow();
															}
														}else{
															if(!currentDetailImageUrl){
																if(options.zoomUnavailableElement){
																	var unavailable=jQuery(options.zoomUnavailableElement);
																	unavailableWasShown=unavailable.is(":visible");
																	if(!unavailableWasShown){
																		unavailable.show();
																	}
																}
																setupOnMouseMove();
																engaged=true;
																jQuery(document).trigger("engaged.magnifier");
															}
														}
													};
												var finalizeEngage=function(e){
												zoomWindow.refit().show();
												zoomWindow.updateDetailMargin();
														lens=lens||new Lens(options.clickForFullscreen);
														jQuery(document).trigger("engaged.magnifier");
												lens.appendLens();
												}
													var hideSelects=function(doForAll){
														var selectsToUse;
														if(doForAll){
															allSelects=jQuery(document).find("select");
															selectsToUse=allSelects;
														}else{
															zoomSelects=jQuery(options.locationElement).find("select");
															selectsToUse=zoomSelects;
														}
														if(jQuery.browser.safari){
															selectsToUse.hide();
														}else{
															selectsToUse.blur();
														}
													};
													var showSelects=function(doForAll){
														if(jQuery.browser.safari){
															if(doForAll&&allSelects){
																allSelects.show();
																if(engaged){
																	hideSelects();
																}
															}else{
																if(!inFullPageZoom&&zoomSelects){
																	zoomSelects.show();
																}
															}
														}
													};
													var bindEvents=function(){
														navImage.mousemove(engage);
													};
													if(navImage.is("img")){
														navImage.attr("complete")?bindEvents():navImage.one("load",bindEvents);
													}else{
														navImage.mousemove(engage);
													}
													var preload=function(urls,logOnloadImage){
														var urlArray=jQuery.makeArray(urls);
														var length=urlArray.length;
														for(var i=0; i<length; i++){
															if(urlArray[i] instanceof Array){
																preload(urlArray[i]);
															}else{
																if(typeof urlArray[i]=="string"&&!preloaded[urlArray[i]]){
																	preloaded[urlArray[i]]=new Image();
																	if(typeof logOnloadImage!="undefined"&&logOnloadImage){
																		if(typeof softlinesCsm!="undefined"){
																			preloaded[urlArray[i]].onload=function(){
																				if(altImageIndex>0){
																					softlinesCsm.logHzTimeStamp("softlines_load_hiRes_alt");
																				}else{
																					softlinesCsm.logHzTimeStamp("softlines_load_hiRes");
																				}
																			};
																		}
																	}
																	preloaded[urlArray[i]].src=urlArray[i];
																}
															}
														}
													};
													this.preload=preload;
													preload(this.attr("src"));
													if(options.preload){
														var url=options.detailImageUrl||navImage.attr("rel");
														var preloadMagnifier=function(){
															preload(url,true);
															Lens.preload();
														};
														var eventNames=options.preload;
															if(eventNames.constructor!=Array){
															eventNames=[eventNames];
														}
														for(var i=0;i<eventNames.length;i++){
															if(eventNames[i]=="immediately"){
																preloadMagnifier();
															}else{
																if(jQuery(window)[eventNames[i]]){
																	jQuery(window)[eventNames[i]](preloadMagnifier);
																}else{
																	jQuery(window).bind(eventNames[i],preloadMagnifier);
																}
															}
														}
														}
													var updateImage=function(navImageUrl,detailImageUrl,navImageBackgroundPosition){
														currentDetailImageUrl=detailImageUrl;
														if(navImage.is("img")){
															navImage.attr("src",navImageUrl);
														}else{
															navImage.css({"background-image":"url("+navImageUrl+")","background-position":navImageBackgroundPosition||"0px 0px"});
														}
														if(jQuery.browser.msie){
															navImage.get(0).className=navImage.get(0).className;
														}
														preload(navImageUrl);
														navImageRect=[navImage.position().left,navImage.position().top,navImage.width(),navImage.height()];
														if(detailImageUrl){
															if(options.preload=="immediately"){
																preload(detailImageUrl,true);
															}else{
																jQuery(window).ready(function(){
																	preload(detailImageUrl,true);
																});
															}
															if(zoomWindow){
																zoomWindow.updateImage(detailImageUrl);
															}else{
																navImage.attr("rel",detailImageUrl);
															}
														}
													};
													this.changeImage=function(navImageUrl,detailImageUrl,navImageBackgroundPosition,thumbIndex,suppressMagnifier){
														if(inFullPageZoom){
															return;
														}
														if(engaged){
															disengage();
														}
														updateImage(navImageUrl,detailImageUrl,navImageBackgroundPosition);
														altImageIndex=thumbIndex;
														magnifierSuppressed=suppressMagnifier;
													};
													this.changeImageSet=function(newImages){
														images=newImages;
													};
													jQuery(document).bind("opened.ql",function(e,data){
														if(lens){lens.updateOffset();
															lens.updatePosition();
														}
													});
													jQuery(document).bind("stretchy-goodness",function(e,data){
														stretchyGoodnessSize=data.size;
													});
													this.destroy=function(){
														if(lens){
															lens.destroy();
														}
														if(zoomWindow){
															zoomWindow.destroy();
														}
													};
													this.detailImage=function(){
														return zoomWindow.detailImage;
													};
													this.engageMagnifier=function(event){
														engage(event);
													};
													this.disengageMagnifier=function(){
														disengage();
													};
													this.isEngaged=function(){
														return engaged;
													};
													jQuery(window).bind("resize",function(){
														if(lens){
															lens.destroy();
														}
														if(zoomWindow){
															zoomWindow.refit();
														}
													});
													return this;
												};
												var loadProductImage = function(event) {
													if (lockedImage != null && lockedImage != event.target) return;
													var img = jQuery(event.target),
													imgWrap = img.parent();
												var index = jQuery.inArray(this, jQuery("#detailPageImages img.thumbnail"));
												
												isAiryEnabled = jQuery("#detailPageImages input[name='isAiryEnabled']");
												if (isAiryEnabled.val() === "true") {
												videoIndex = jQuery.inArray(this, jQuery(".detailPageThumbnail.videoThumbnail img.thumbnail"));
												videoUrl = jQuery("#detailPageImages input[name='videoUrl']").eq(videoIndex).val();
													versionNumber = jQuery("#detailPageImages input[name='versionNumber']").eq(videoIndex).val();
												}
												return changeMainImageVariant(index);
												}
												var changeMainImageVariant = function(imageIndex) {
												var showHandCursor = true,
													detailPageImgs = jQuery("#detailPageImages");
													src = jQuery("input[name='detailImgUrl']", detailPageImgs).eq(imageIndex).val();
													zoom = jQuery("input[name='hiResImgUrl']", detailPageImgs).eq(imageIndex).val();
													mediaId = jQuery("input[name='mediaId']", detailPageImgs).eq(imageIndex).val();
												try {
												if (mediaId.length > 0) {
												setUpVideo(imageIndex, src, mediaId);
												} else {
												setUpImage(imageIndex, src, zoom)
												}
												} catch(err) { }
												return { showHandCursor:showHandCursor };
												};
												var setUpImage = function(index, src, zoom) {
													clearAiryDiv();
													jQuery("#mainImg").attr("src", src);
													magnifier.changeImage(src, zoom, null, index);
													if (zoom.length > 0) {
														jQuery("#detailPageImages #imageCaption").text("Roll over image to zoom in");
													} else {
														jQuery("#detailPageImages #imageCaption").html("&nbsp;");
													}
													selectedImageId = index;
													pauseCurrentVideo();
													jQuery("#mainImg").show();
												}
												var pauseCurrentVideo = function() {
													var lastVideo = AmznVideoPlayer.players[AmznVideoPlayer.lastPlayedId];
													if (lastVideo) {
															lastVideo.pause();
													}
													AmznVideoPlayer.hideAll();
												}
												var setUpVideo = function(index, slateUrl, mediaId) {
													jQuery("#mainImg").attr("src", "");
														jQuery("#mainImg").hide();
													jQuery("#detailPageImages #imageCaption").text("Click to play video");
													if (index != selectedImageId) {
														if (isAiryEnabled.val() === "true") {
															clearAiryDiv();
															var mediaLocation = videoUrl+'.';
															var airyOnMediaCentralBaseUrl = 'https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/'+versionNumber;
															Airy.embed({
																parentId : 'airy-container',
																slateImages : {
																	preloadSlate : slateUrl,
																	postMediaSlate : slateUrl
																},
																streamingUrls : [
																	mediaLocation + 'mp4',
																	mediaLocation + 'webm',
																	mediaLocation + 'ogv'
																],
																swfUrl : airyOnMediaCentralBaseUrl + '/flash/AiryBasicRenderer._TTW_.swf'
															});
														} else {
															AmznVideoPlayer.hideAll();
															if (AmznVideoPlayer.lastPlayedId == mediaId) {
																AmznVideoPlayer.players[mediaId].showFlash();
															} else {
																if (AmznVideoPlayer.players[AmznVideoPlayer.lastPlayedId]) {
																	AmznVideoPlayer.players[AmznVideoPlayer.lastPlayedId].pause();
																}
																AmznVideoPlayer.players[mediaId].resizeVideo(300,300);
																AmznVideoPlayer.players[mediaId].showPreplay();
															}
														}
														selectedImageId = index;
													}
												}
												var lockImage = function(event) {
													//Only allow the user to click on images to lock them if they span to
													//a second row (more then 6).
													size = jQuery("#detailPageImages .detailPageThumbnail").length;
												if (size <= 6) return;
													jQuery(event.target).mouseenter();
													jQuery(lockedImage).css("border-color", border);
													if (lockedImage == event.target) {
														lockedImage= null;
													} else {
														lockedImage = event.target;
													border = jQuery(lockedImage).css("border-color");
													jQuery(lockedImage).css("border-color", "black");
													}
													jQuery(event.target).mouseenter();
												}
												window.AmznVideoPlayer=function(mediaObject,targetId,width,height){
													AmznVideoPlayer.players[mediaObject.mediaObjectId]=this;
													this.slateImageUrl=mediaObject.slateImageUrl;
													this.id=mediaObject.mediaObjectId;
													this.preplayWidth=width;
													this.preplayHeight=height;
													this.flashDivWidth=width;
													this.flashDivHeight=height;
													this.targetId=targetId;
													this.swfLoading=0;
													this.swfLoaded=0;
													this.preplayDivId='preplayDiv'+this.id;
													this.flashDivId='flashDiv'+this.id;
												}
												AmznVideoPlayer.players=[];
												AmznVideoPlayer.session="185-9036278-1578433";
												AmznVideoPlayer.root='http://www.amazon.com';
												AmznVideoPlayer.locale='en_US';
												AmznVideoPlayer.swf='https://images-na.ssl-images-amazon.com/images/G/01/am3/20111115154938207/AMPlayer._V163169252_.swf';
												AmznVideoPlayer.preplayTemplate='<div style="width:0px;height:0px;" class="outercenterslate"><div style="width:0px;height:-43px;" class="centerslate" ><span></span><img border="0" alt="Click to watch this video" src="slateImageGoesHere"></div><div class="shuttleGradient"><div class="shuttleTextTop">Amazon</div><div class="shuttleTextBottom">Video</div><img id="mediaObjectIdpreplayImageId" style="height:74px;position:absolute;left:-31px;top:-31px;" src="https://images-na.ssl-images-amazon.com/images/G/01/x-locale/communities/customerimage/play-shuttle-off._V192250119_.gif" border="0"/></div></div>';
												AmznVideoPlayer.rollOn='https://images-na.ssl-images-amazon.com/images/G/01/x-locale/communities/customerimage/play-shuttle-on._V192250112_.gif';
												AmznVideoPlayer.rollOff='https://images-na.ssl-images-amazon.com/images/G/01/x-locale/communities/customerimage/play-shuttle-off._V192250119_.gif';
												AmznVideoPlayer.flashVersion='9.0.115';
												AmznVideoPlayer.noFlashMsg='To view this video download <a target="_blank" href="http://get.adobe.com/flashplayer/" target="_top">Flash Player</a> (version 9.0.115 or higher)';
												AmznVideoPlayer.hideAll=function(){
													for(var i in AmznVideoPlayer.players){
													AmznVideoPlayer.players[i].hidePreplay();
													AmznVideoPlayer.players[i].hideFlash();
													}
												}
												AmznVideoPlayer.prototype.writePreplayHtml=function(){
													if(typeof this.preplayobject=='undefined'){
													this.preplayobject=jQuery(AmznVideoPlayer.preplayTemplate.replace("slateImageGoesHere",this.slateImageUrl)
													.replace("mediaObjectId",this.id).replace("-43px",(this.preplayHeight-43)+"px").replace("-31px",(Math.round(this.preplayWidth/2)-31)+"px"));
													this.preplayobject.width(this.preplayWidth+"px").height(this.preplayHeight+"px");
													this.preplayobject.find(".innercenterslate").width(this.preplayWidth+"px").height(this.preplayHeight+"px");
													this.preplayobject.find(".centerslate").width(this.preplayWidth+"px");
													var self=this;
													this.preparePlaceholder();
													jQuery("#"+this.preplayDivId).click(function(){self.preplayClick();});
													jQuery("#"+this.preplayDivId).hover(
													function(){jQuery("#"+self.id+'preplayImageId').attr('src',AmznVideoPlayer.rollOn);},
													function(){jQuery("#"+self.id+'preplayImageId').attr('src',AmznVideoPlayer.rollOff);});
													jQuery("#"+this.preplayDivId).html(this.preplayobject);
													}
												}
												AmznVideoPlayer.prototype.writeFlashHtml=function(){
													if(!this.swfLoaded&&!this.swfLoading){
													this.swfLoading=1;
													var params={'allowscriptaccess':'always','allowfullscreen':'true','wmode':'transparent','quality':'high'};
													var shiftJISRegExp = new RegExp("^https?:"+String.fromCharCode(0x5C)+"/"+String.fromCharCode(0x5C)+"/");
													var flashvars={'xmlUrl':AmznVideoPlayer.root+'/gp/mpd/getplaylist-v2/'+this.id+'/'+AmznVideoPlayer.session,
													'mediaObjectId':this.id,'locale':AmznVideoPlayer.locale,'sessionId':AmznVideoPlayer.session,
													'amazonServer':AmznVideoPlayer.root.replace(shiftJISRegExp,''),'swfEmbedTime':new Date().getTime(),
													'allowFullScreen':'true','amazonPort':'80','preset':'detail','autoPlay':'1','permUrl':'gp/mpd/permalink','scale':'noscale', 'enableShare':'false'};
													var self=this;
													swfobject.embedSWF(AmznVideoPlayer.swf,'so_'+this.id,"100%","100%",AmznVideoPlayer.flashVersion,false,flashvars,params,params,
													function(e){
													self.swfLoading=0;
													if(e.success){AmznVideoPlayer.lastPlayedId=self.id;self.swfLoaded=1;return;}
													jQuery('#'+self.flashDivId).html('<br/><br/><br/><br/><br/><br/><br/>'+AmznVideoPlayer.noFlashMsg).css({'background':'#ffffff'});
													}
													);
													}
												}
												AmznVideoPlayer.prototype.showPreplay=function(){
													this.writePreplayHtml();
													this.preparePlaceholder();
													jQuery("#"+this.preplayDivId).show();
													return this;
												}
												AmznVideoPlayer.prototype.hidePreplay=function(){
													this.preparePlaceholder();
													jQuery("#"+this.preplayDivId).hide();
													return this;
												}
												AmznVideoPlayer.prototype.showFlash=function(){
													this.preparePlaceholder();
													if(!this.swfLoaded&&!this.swfLoading){
													var self=this;
														self.writeFlashHtml();
													}
													jQuery("#"+this.flashDivId).width(this.flashDivWidth+'px').height(this.flashDivHeight+'px');
													AmznVideoPlayer.lastPlayedId=this.id;
													return this;
												}
												AmznVideoPlayer.prototype.hideFlash=function(){
													this.preparePlaceholder();
													jQuery("#"+this.flashDivId).width('0px').height('1px');
													return this;
												}
												AmznVideoPlayer.prototype.preparePlaceholder=function(){
													if(!(jQuery('#'+this.flashDivId).length)||!(jQuery('#'+this.preplayDivId))){
													var preplayDiv=jQuery("<div id='"+this.preplayDivId+"'></div>").css({'position':'relative'});
													var flashDiv=jQuery("<div id='"+this.flashDivId+"'><div id='so_"+this.id+"'/></div>").css({'overflow':'hidden',background:'#000000'});
													var wrapper=jQuery("<div/>").css({'overflow':'hidden','position':'relative','float':'left'}).append(preplayDiv).append(flashDiv);
																jQuery('#'+this.targetId).html(wrapper);
																}
															}
															AmznVideoPlayer.prototype.resizeVideo=function(width,height){
																this.flashDivWidth=width;
																this.flashDivHeight=height;
																if (jQuery("#"+this.flashDivId)&&jQuery("#"+this.flashDivId).width()!=0){
																	this.showFlash();
																}
															}
															AmznVideoPlayer.prototype.preplayClick=function(){
																if(this.swfLoaded){
																this.play();
																}
																this.showFlash();
																this.hidePreplay();
															}
															AmznVideoPlayer.prototype.play=function(){
																var so=this.getSO();
																if(typeof so.playVideo=='function'){
																if(this.id!=AmznVideoPlayer.lastPlayedId){
																AmznVideoPlayer.players[AmznVideoPlayer.lastPlayedId].pause();
																}
																AmznVideoPlayer.lastPlayedId=this.id;so.playVideo();
																}
															}
															AmznVideoPlayer.prototype.pause=function(){
																if(this.swfLoading||this.swfLoaded){
																this.autoplayCancelled=true;
																}
																var so=this.getSO();
																if(so && typeof so.pauseVideo=='function'){
																so.pauseVideo();
																}
															}
															AmznVideoPlayer.prototype.stop=function(){
																if(this.swfLoading||this.swfLoaded){
																this.autoplayCancelled=true;
																}
																var so=this.getSO();
																if(so && typeof so.stopVideo=='function'){
																so.stopVideo();
																}
															}
																
															AmznVideoPlayer.prototype.getSO=function(){
																return jQuery("#so_"+this.id).get(0);
															}
																
															function isAutoplayCancelled(showID) {
																return (AmznVideoPlayer.players[showID] && AmznVideoPlayer.players[showID].autoplayCancelled == true);
															}
															var clearAiryDiv = function() {
																if (jQuery("#airy-container").length > 0) {
																jQuery("#airy-container").html("");
																}
															}
																
						</script>
						<link href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/productDetail._V1412297807_.css" type="text/css" rel="stylesheet" />
						<link rel="search" type="application/opensearchdescription+xml" title="Search AmazonFresh" href="opensearch.xml" />
						<link href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/responsiveLayout._V1368568519_.css" type="text/css" rel="stylesheet" />
						<link href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/searchAndBrowse-leftnav._V1408034196_.css" type="text/css" rel="stylesheet" />
						<link href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/searchAndBrowse-yoda._V1415119953_.css" type="text/css" rel="stylesheet" />
						<!-- [if lte IE 8]>
						<link href="https://images-na.ssl-images-amazon.com/images/G/01/omaha/css/searchAndBrowse-yoda-ie8._V1406567502_.css" type="text/css" rel="stylesheet" />
						<![endif]-->
						<script type="text/javascript">
											function openVariationDrawer(variationDrawerWrapper, variationDrawer) {
											variationDrawerWrapper.css("display", "block");
											variationDrawer.animate({
											bottom:0
											},500, "easeInOutSine");
											enableOverflow(variationDrawerWrapper);
											}
											function enableOverflow(variationDrawerWrapper) {
											setTimeout(function () {
											variationDrawerWrapper.css("overflow", "visible");
											}, 500);
											}
											function hideDrawerWrapper(variationDrawerWrapper) {
											setTimeout(function () {
											variationDrawerWrapper.css("display", "none");
											}, 500);
											}
											function closeVariationDrawer(variationDrawerWrapper, variationDrawer) {
											variationDrawerWrapper.css("overflow", "hidden");
											variationDrawer.animate({
											bottom:-190
											},500, "easeInOutSine");
											hideDrawerWrapper(variationDrawerWrapper);
											}
											jQuery(function($) {
											$(".viewOptionButton").live('click', function(e) {
											var variationDrawerWrapper = $(this).parents(".smallProduct").find(".variationDrawerWrapper");
											var variationDrawer = $(this).parents(".smallProduct").find(".variationDrawer");
											openVariationDrawer(variationDrawerWrapper, variationDrawer);
											});
											$(".variationDrawerClose").live('click', function(e) {
											var variationDrawerWrapper = $(this).parents(".smallProduct").find(".variationDrawerWrapper");
											var variationDrawer = $(this).parents(".smallProduct").find(".variationDrawer");
											closeVariationDrawer(variationDrawerWrapper, variationDrawer);
											});
											});
						</script>
						<style id="antiClickjack">body{display:none !important;}</style>
						<script type="text/javascript">
											if (self === top) {
											var antiClickjack = document.getElementById("antiClickjack");
											antiClickjack.parentNode.removeChild(antiClickjack);
											}  else {
											top.location = self.location;
											}
						</script>

						<script language="javascript" type="text/javascript">
																	jQuery(document).ready(function() {
																	showNewExperience();
																	})
																	function showNewExperience(){
																	if(jQuery("#lb-ondemand").children().length == 0) {
																	jQuery.get("newShoppingExperience", function(data) {
																	if(jQuery.trim(data).length>0){
																	var target = "target";
																	if(data.indexOf(target) == -1 ){
																	showOnDemandLightboxWithContent(data);
																	jQuery("#lb-cancel").hide();
																	jQuery("#lightbox").css("width", 650);
																	jQuery("#lightbox").css("border-radius", 10);
																	jQuery("#editMultipleButton").click(function() {
																	jQuery.get("chooseExperience?legacy=EditOrder", function(data) {
																	location.href = "AllOrders";
																	});
																	});
																	jQuery("#completeOrder").click(function() {
																	jQuery.get("chooseExperience?legacy=CompleteOrder", function(data) {
																	hideLightbox();
																	});
																	});
																	jQuery("#legacyLink").click(function() {
																	jQuery.get("chooseExperience?legacy=ShopAcrossRegion", function(data) {
																	location.href = "splashDelivery";
																	});
																	});
																	}
																	}
																	});
																	}
																	}
																	function transitToOrderDetail() {
																	jQuery.get("chooseExperience?legacy=EditOrder", function(data) {
																	jQuery("#orderDetailForm").submit();
																	});
																	}
																	function setChosenExperienceAndGoToAmazon(ref) {
																	var url = 'chooseExperience?legacy=ShopOnAmazon';
																	jQuery.get(url, function(data) {
																	location.href = ref;
																	});
																	}
									</script>